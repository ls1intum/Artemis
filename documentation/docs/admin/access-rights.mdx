import Callout from "../../src/components/Callout/Callout";
import {CalloutVariant} from "../../src/components/Callout/Callout.types";

# Access Rights

Artemis distinguishes between seven different roles: **SUPER_ADMIN**, **ADMIN**, **INSTRUCTOR**, **EDITOR**, **TA** (Teaching Assistant), **USER** and **ANONYMOUS**.
The roles are sorted in descending order. An INSTRUCTOR has at least all the permissions that an EDITOR has.
A SUPER_ADMIN has no restrictions, while an ANONYMOUS has hardly any rights.

## Roles Overview

- **SUPER_ADMIN:** has all permissions that an ADMIN has and additional privileges for critical security operations (see [Super Admin vs Admin](#super-admin-vs-admin) for details)
- **ADMIN:** can access all features that Artemis provides (includes features regarding the server administration, e.g. server health checks, user management and creating new courses)
- **INSTRUCTOR:** can access all features related to the content of a course (includes creating and deleting exercises/exams/lectures and monitoring scores and submissions)
- **EDITOR:** can create and edit the content of a course but cannot delete content and monitoring other course participants is limited
- **TEACHING ASSISTANT:** can assess student submissions and view course content before the release date
- **USER:** participates as a Student in courses, can view course content after the release date
- **ANONYMOUS:** role before login

<Callout variant={CalloutVariant.warning}>
    When changing the access rights of a user, the respective user must logoff and then logon again for the changes to take effect.
</Callout>

In the following, the respective permissions illustrated. If a subordinated role has all permissions or a role does not have any access rights, it is not explicitly displayed.

## Super Admin vs Admin

While Super Admins have all the permissions of regular Admins, they have additional privileges in security-critical areas:

### Admin User Management

Only Super Admins can manage administrator accounts (both Admin and Super Admin users). This includes:
- **Creating** new admin or super admin users
- **Updating** existing admin or super admin users
- **Activating/Deactivating** admin or super admin users
- **Deleting** admin or super admin users

Regular Admins can only manage users with roles below Admin (Instructor, Editor, Teaching Assistant, Student).

### Passkey Approval

Super Admins have the exclusive privilege to approve passkey registrations for administrators.
This minimizes the attack surface for critical security operations by limiting passkey approval to a very small number of trusted users.

For detailed information about passkey authentication, configuration, and the approval process, see the [Passkey Authentication](/admin/production-setup/security#passkey-authentication) section in the Security Configuration documentation.

<Callout variant={CalloutVariant.info}>
    Super Admin privileges ensure that only the most trusted users can manage administrator accounts and approve passkeys for administrators.
    This minimizes the attack surface for critical security operations.
</Callout>

## Navigation

| Feature                  | Super Admin | Admin | Instructor | Editor | Teaching Assistant | Student |
|--------------------------|-------------|-------|------------|--------|--------------------|---------|
| Course Overview          | ✔           | ✔     | ✔          | ✔      | ✔                  | ✔       |
| Course Management        | ✔           | ✔     | ✔          | ✔      | ✔                  |         |
| Edit Course              | ✔           | ✔     | ✔          |        |                    |         |
| Create new course        | ✔           | ✔     |            |        |                    |         |
| Delete Course            | ✔           | ✔     |            |        |                    |         |
| Server Administration    | ✔           | ✔     |            |        |                    |         |
| Manage Non-Admin Users   | ✔           | ✔     |            |        |                    |         |
| Manage Admin Users       | ✔           |       |            |        |                    |         |
| Approve Passkeys         | ✔           |       |            |        |                    |         |

## Course

| Feature                     | Instructor | Editor | Teaching Assistant |
|-----------------------------|------------|--------|--------------------|
| Exercises                   | ✔          | ✔      | ✔                  |
| Exams                       | ✔          | ✔      | ✔                  |
| Assessment Dashboard        | ✔          | ✔      | ✔                  |
| Statistics                  | ✔          | ✔      | ✔                  |
| Lectures                    | ✔          | ✔      |                    |
| Learning Goals              | ✔          |        |                    |
| Instructor Course Dashboard | ✔          |        |                    |

## Exercises

### General Functionality

| Feature                             | Instructor | Editor | Teaching Assistant | Student |
|-------------------------------------|------------|--------|--------------------|---------|
| Exercise View                       | ✔          | ✔      | ✔                  | ✔       |
| Start + Submit Exercise             | ✔          | ✔      | ✔                  | ✔       |
| Exercise Detail View                | ✔          | ✔      | ✔                  |         |
| Scores                              | ✔          | ✔      | ✔                  |         |
| Participation                       | ✔          | ✔      | ✔                  |         |
| Submissions                         | ✔          | ✔      |                    |         |
| Create new Exercise                 | ✔          | ✔      |                    |         |
| Import Exercise                     | ✔          | ✔      |                    |         |
| Edit                                | ✔          | ✔      |                    |         |
| Create / Update Example Submissions | ✔          | ✔      |                    |         |
| View / Assess Example Submissions   | ✔          | ✔      | ✔                  |         |
| Check Plagiarism                    | ✔          | ✔      |                    |         |
| Export Submissions                  | ✔          |        |                    |         |
| Add External Submission             | ✔          |        |                    |         |
| Delete                              | ✔          |        |                    |         |

### Programming Exercises

| Feature                           | Instructor       | Editor           | Teaching Assistant | Student              |
|-----------------------------------|------------------|------------------|--------------------|----------------------|
| View Exercise (course)            | ✔                | ✔                | ✔                  | ✔ (if released)      |
| View Exercise (exam)              | ✔                | ✔                |                    |                      |
| Create Exercise                   | ✔                | ✔                |                    |                      |
| Edit Exercise                     | ✔                | ✔                |                    |                      |
| Delete Exercise                   | ✔                |                  |                    |                      |
| Import Exercise                   | ✔ (both courses) | ✔ (both courses) |                    |                      |
| Clone Repository                  | ✔                | ✔                | ✔                  |                      |
| Download Repo                     | ✔                | ✔                | ✔                  |                      |
| Export Instructor Repository      | ✔                | ✔                | ✔                  |                      |
| Export Student Repository         | ✔                | ✔                | ✔                  | ✔ (own only)         |
| Export Solution (if published)    | ✔                | ✔                | ✔                  | ✔                    |
| Edit in Editor                    | ✔                | ✔                |                    |                      |
| Manage Hints                      | ✔                | ✔                |                    |                      |
| Update Structure Test Oracle      | ✔                | ✔                |                    |                      |
| View Template/Solution Repos      | ✔                | ✔                |                    |                      |
| Trigger Template/Solution Build   | ✔                | ✔                |                    |                      |
| View/Edit Test Cases              | ✔                | ✔                |                    |                      |
| View Test Cases                   | ✔                | ✔                | ✔                  |                      |
| View Grading Statistics           | ✔                | ✔                |                    |                      |
| Manage SCA Categories             | ✔                | ✔                |                    |                      |
| Import SCA Configuration          | ✔ (both courses) | ✔ (both courses) |                    |                      |
| Manage Submission Policies        | ✔                |                  |                    |                      |
| View Submission Policy            | ✔                | ✔                | ✔                  | ✔                    |
| Re-evaluate All Results           | ✔                |                  |                    |                      |
| Trigger All Builds                | ✔                |                  |                    |                      |
| Unlock All Repositories           | ✔                |                  |                    |                      |
| Lock All Repositories             | ✔                |                  |                    |                      |
| Add External Submission           | ✔                |                  |                    |                      |
| Download All Repos                | ✔                |                  |                    |                      |
| Cleanup                           | ✔                |                  |                    |                      |
| Check Plagiarism                  | ✔                | ✔                |                    |                      |
| Build Plan Access                 | R + W            | R + W            | R                  |                      |
| Participate in Exercise           | ✔                | ✔                | ✔                  | ✔ (if released)      |
| Trigger Own Build                 | ✔                | ✔                | ✔                  | ✔                    |
| View Own Results                  | ✔                | ✔                | ✔                  | ✔                    |
| Assess Submissions                | ✔                | ✔                | ✔                  |                      |
| View All Submissions              | ✔                | ✔                |                    |                      |
| Get Exercise Tasks                | ✔                | ✔                | ✔                  |                      |

<Callout variant={CalloutVariant.info}>
    **Import Exercise** and **Import SCA Configuration** require at least Editor role in **both** the source and target course.
</Callout>

<Callout variant={CalloutVariant.warning}>
    **Exam exercises** require Editor role for viewing details, while **course exercises** only require Teaching Assistant role.
</Callout>

### Programming Exercises - Repository Access

**Action Types:**
- **READ** (fetch, pull)
- **WRITE** (push)
- **RESET** (reset to origin head)

#### Access to all repositories of a course

| Admin / Instructor / Editor | Teaching Assistant | Student    |
|-----------------------------|--------------------|------------|
| *READ*, *WRITE*, *RESET*    | *READ*             | restricted |

#### Access for Teaching Assistants and Students on their own repositories (graded participation)

| Context                                        | Teaching Assistant       | Student                  |
|------------------------------------------------|--------------------------|--------------------------|
| Before start                                   | *READ*, *WRITE*, *RESET* | restricted               |
| After start but before due date and not locked | *READ*, *WRITE*, *RESET* | *READ*, *WRITE*, *RESET* |
| After due date                                 | *READ*                   | *READ*                   |
| Locked                                         | *READ*                   | *READ*                   |

<Callout variant={CalloutVariant.info}>
    **Practice** repositories also allow *WRITE* and *RESET* access after the due date.
</Callout>

### Programming Exercises - Summary

| Role       | Capabilities                                                               |
|------------|----------------------------------------------------------------------------|
| Student    | Participate, view own results, trigger own builds, export own repository   |
| TA         | Same as Student + view all submissions, assess, export repositories        |
| Editor     | Same as TA + create/edit exercises, manage test cases, SCA, plagiarism     |
| Instructor | Same as Editor + delete exercises, manage submission policies, re-evaluate |
| Admin      | Full access to all programming exercises                                   |

### Programming Exercises - Prerequisites

- **Course Enrollment**: All exercise access requires enrollment in the course (except for Admins)
- **Admin Override**: Admins can access all programming exercises regardless of course membership
- **Exam vs Course**: Exam exercises require Editor role for viewing details; course exercises only require TA role

### Programming Exercises - Visibility Rules

Visibility conditions marked as "(if released)" in the tables above are defined as follows:

**Exercise Release:**
- Students can only view and participate in exercises after the `releaseDate` has passed
- Teaching Assistants and above can view exercises before release

**Test Case Visibility:**
- Test case visibility is controlled per test case via the `Visibility` enum: `ALWAYS`, `AFTER_DUE_DATE`, `NEVER`
- Exam exercises default to `AFTER_DUE_DATE`; course exercises default to `ALWAYS`
- The `releaseTestsWithExampleSolution` flag controls when tests are revealed

**Solution Repository:**
- Students can export the solution repository only after the example solution has been published
- Before publication, Teaching Assistant role is required

### Quiz Exercises

| Feature                         | Instructor       | Editor           | Teaching Assistant | Student              |
|---------------------------------|------------------|------------------|--------------------|----------------------|
| View Quiz (course)              | ✔                | ✔                | ✔                  | ✔ (if released)      |
| View Quiz (exam)                | ✔                | ✔                |                    |                      |
| Create Quiz (course)            | ✔                | ✔                |                    |                      |
| Create Quiz (exam)              | ✔                | ✔                |                    |                      |
| Update Quiz                     | ✔                | ✔                |                    |                      |
| Delete Quiz                     | ✔                |                  |                    |                      |
| Search Quizzes                  | ✔                | ✔                |                    |                      |
| Set Visible                     | ✔                | ✔                |                    |                      |
| Start Now                       | ✔                | ✔                |                    |                      |
| End Now                         | ✔                |                  |                    |                      |
| Preview                         | ✔                | ✔                | ✔                  |                      |
| Sample Solution                 | ✔                | ✔                | ✔                  | ✔ (after quiz ends)  |
| View Statistics                 | ✔                | ✔                | ✔                  |                      |
| Recalculate Statistics          | ✔                | ✔                | ✔                  |                      |
| Evaluate Quiz                   | ✔                |                  |                    |                      |
| Re-evaluate Quiz                | ✔                |                  |                    |                      |
| Submit (Live Mode)              | ✔                | ✔                | ✔                  | ✔                    |
| Submit (Practice Mode)          | ✔                | ✔                | ✔                  | ✔ (after quiz ends)  |
| Submit (Exam Mode)              | ✔                | ✔                | ✔                  | ✔                    |
| Start Participation             | ✔                | ✔                | ✔                  | ✔ (if released)      |
| Join Batch                      | ✔                | ✔                | ✔                  | ✔ (if started)       |
| Create Batch                    | ✔                | ✔                | ✔                  |                      |
| Start Batch (own)               | ✔                | ✔                | ✔                  |                      |
| Start Batch (others')           | ✔                |                  |                    |                      |
| Training Questions              | ✔                | ✔                | ✔                  | ✔                    |
| Submit Training Answer          | ✔                | ✔                | ✔                  | ✔                    |
| View Training Leaderboard       | ✔                | ✔                | ✔                  | ✔                    |
| Update Leaderboard Settings     | ✔                | ✔                | ✔                  | ✔                    |

<Callout variant={CalloutVariant.info}>
    **Exam quiz exercises** require Editor role for viewing details, while **course quiz exercises** only require Teaching Assistant role.
</Callout>

<Callout variant={CalloutVariant.warning}>
    **End Now** requires Instructor role (higher than Start Now which only requires Editor).
</Callout>

### Quiz Exercises - Batch Mode

Quiz exercises support three modes: **SYNCHRONIZED**, **BATCHED**, and **INDIVIDUAL**.

| Operation    | Mode         | Teaching Assistant                     | Student             |
|--------------|--------------|----------------------------------------|---------------------|
| Join Batch   | BATCHED/IND. | ✔                                      | ✔ (if quiz started) |
| Create Batch | BATCHED/IND. | ✔                                      |                     |
| Start Batch  | BATCHED/IND. | ✔ (own batches) / INSTRUCTOR (others') |                     |

<Callout variant={CalloutVariant.info}>
    Batch operations are not allowed for exam quiz exercises - they are only available for course quizzes.
</Callout>

### Quiz Exercises - Summary

| Role       | Capabilities                                                                     |
|------------|----------------------------------------------------------------------------------|
| Student    | Participate, submit answers, view results after quiz ends, access training mode  |
| TA         | Same as Student + preview, view statistics, create/start own batches             |
| Editor     | Same as TA + create/update quizzes, start/set visible, search quizzes            |
| Instructor | Same as Editor + delete quizzes, evaluate/re-evaluate, end quiz, start any batch |
| Admin      | Full access to all quiz exercises                                                |

### Quiz Exercises - Prerequisites

- **Course Enrollment**: All quiz access requires enrollment in the course (except for Admins)
- **Admin Override**: Admins can access all quizzes regardless of course membership
- **Exam vs Course**: Exam quiz exercises require Editor role for viewing details; course quizzes only require TA role

### Quiz Exercises - Visibility Rules

Visibility conditions marked as "(if released)" or "(if started)" in the tables above are defined as follows:

**Quiz Release:**
- Students can only view quizzes after the `releaseDate` has passed
- Teaching Assistants and above can view quizzes before release

**Quiz Started:**
- Students can join batches only after the quiz has started (not ended)
- Batch joining is not available for exam quiz exercises

**Practice Mode:**
- Students can submit in practice mode only after the quiz has ended
- For exam exercises, practice mode is only available for test exams

**Sample Solution:**
- Students can view the sample solution only after the quiz has ended
- Teaching Assistants and above can view sample solutions at any time

## Lectures

| Feature                          | Instructor       | Editor           | Teaching Assistant | Student         |
|----------------------------------|------------------|------------------|--------------------|-----------------|
| View Lecture                     | ✔                | ✔                | ✔                  | ✔ (if enrolled) |
| View Lecture Details             | ✔                | ✔                | ✔                  | ✔ (if enrolled) |
| Create Lecture                   | ✔                | ✔                |                    |                 |
| Edit Lecture                     | ✔                | ✔                |                    |                 |
| Delete Lecture                   | ✔                |                  |                    |                 |
| Import Lecture                   | ✔ (both courses) | ✔ (both courses) |                    |                 |
| Search Lectures                  | ✔                | ✔                |                    |                 |
| View Lecture Unit                | ✔                | ✔                | ✔                  | ✔ (if visible)  |
| Add Lecture Unit                 | ✔                | ✔                |                    |                 |
| Edit Lecture Unit                | ✔                | ✔                |                    |                 |
| Delete Lecture Unit              | ✔                |                  |                    |                 |
| Complete Lecture Unit            | ✔                | ✔                | ✔                  | ✔ (if visible)  |
| View Lecture Unit Processing     | ✔                | ✔                |                    |                 |
| Retry Lecture Unit Processing    | ✔                | ✔                |                    |                 |
| View Attachment                  | ✔                | ✔                | ✔                  | ✔ (if visible)  |
| View all Attachments for Lecture | ✔                | ✔                | ✔                  |                 |
| Add Attachment (in unit)         | ✔                | ✔                |                    |                 |
| Edit Attachment                  | ✔                | ✔                |                    |                 |
| Delete Attachment                | ✔                |                  |                    |                 |

<Callout variant={CalloutVariant.info}>
    **Import Lecture** requires at least Editor role in **both** the source and target course.
</Callout>


### Summary

| Role       | Capabilities                                                     |
|------------|------------------------------------------------------------------|
| Student    | View lectures/units in enrolled courses (after release date)     |
| TA         | Same as Student + see all units regardless of release date       |
| Editor     | Same as TA + create/update lectures, units, and attachments      |
| Instructor | Same as Editor + delete lectures, units, and attachments         |
| Admin      | Full access to all lectures                                      |

### Prerequisites

- **Course Enrollment**: All lecture access requires enrollment in the course (except for Admins)
- **Admin Override**: Admins can access all lectures regardless of course membership

### Visibility Rules

Visibility conditions marked as "(if visible)" or "(if enrolled)" in the table above are defined as follows:

**Lecture Units and Attachments:**
- Visible to students if `releaseDate` is `null` OR `releaseDate` is in the past
- Teaching Assistants and above can see all units/attachments regardless of release date

**Search Lectures:**
- Non-admin users only see lectures from courses where they have at least Editor role

<Callout variant={CalloutVariant.warning}>
  The `visibleDate` field on the `Lecture` entity is deprecated and will be removed.
  All visibility control is managed at the lecture unit and attachment level via their `releaseDate` fields.
</Callout>


## Exam

| Feature               | Instructor | Editor | Teaching Assistant |
|-----------------------|------------|--------|--------------------|
| Assessment Dashboard  | ✔          | ✔      | ✔                  |
| Exercise Groups       | ✔          | ✔      |                    |
| Edit Exercise Group   | ✔          | ✔      |                    |
| Import Exercise Group | ✔          | ✔      |                    |
| Delete Exercise Group | ✔          |        |                    |
| Edit Exam             | ✔          |        |                    |
| Import Exam           | ✔          |        |                    |
| Archive Exam          | ✔          |        |                    |
| Delete Exam           | ✔          |        |                    |
| Exam Checklist        | ✔          |        |                    |
| Scores                | ✔          |        |                    |
| Test Run              | ✔          |        |                    |
| Student Exams         | ✔          |        |                    |
| Students              | ✔          |        |                    |
