api: v0.0.1
metadata:
    name: java-maven-sequential
    id: java-windfile
    description: Build Plan for a java Exercise with maven
    author: Andreas Resch
    gitCredentials: artemis_admin
    docker:
        image: ls1tum/artemis-maven-template
        tag: java17-20
        volumes:
            - ${WORKDIR}:${WORKDIR}
            - ${TMPDIR}:${TMPDIR}
        parameters:
            - --cpus
            - '"2"'
            - --memory
            - '"2g"'
            - --memory-swap
            - '"2g"'
            - --pids-limit
            - '"1000"'
actions:
    - name: maven
      script: |
          cd structural
          mvn clean test
          if [ $? -eq 0 ]; then
            cd ..
            cd behavior
            mvn clean test
          fi
          cd ..
      run_always: false
