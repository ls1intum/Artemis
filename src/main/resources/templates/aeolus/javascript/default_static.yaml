api: v0.0.1
metadata:
  name: JavaScript Static Code Analysis
  id: javascript_static
  description: Run tests using Jest with static code analysis
actions:
  - name: install_dependencies
    script: 'npm ci --prefer-offline --no-audit'
  - name: static_code_analysis
    script: 'npm run lint:ci || [ $? -eq 1 ]'
    results:
      - name: ESLint issues
        path: 'eslint.sarif'
        type: sca
  - name: test
    script: |-
      # Run the tests
      npm run test:ci || true
    runAlways: false
    results:
      - name: junit
        path: 'junit.xml'
        type: junit
