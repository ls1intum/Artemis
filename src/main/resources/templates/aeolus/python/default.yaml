api: v0.0.1
metadata:
    name: python regular runs
    id: python-windfile
    description: This is a windfile for python exercises
actions:
    - name: build_and_test_the_code
      script: |
          python3 -m compileall . -q || error=true
          if [ ! $error ]
          then
            pytest --junitxml=test-reports/results.xml
          else
            exit 1
          fi
      runAlways: false
    - name: junit
      parameters:
          ignore_time: false
          test_results: test-reports/*results.xml
      platform: bamboo
      kind: junit
      runAlways: true
