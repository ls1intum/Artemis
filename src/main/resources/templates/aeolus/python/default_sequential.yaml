api: v0.0.1
metadata:
    name: python sequential runs
    id: python-windfile
    description: This is a windfile for python exercises
    author: Andreas Resch
    docker:
        image: ls1tum/artemis-python-docker
        tag: latest
        volumes:
            - ${WORKDIR}:${WORKDIR}
            - ${TMPDIR}:${TMPDIR}
        parameters:
            - --cpus
            - '"2"'
            - --memory
            - '"2g"'
            - --memory-swap
            - '"2g"'
            - --pids-limit
            - '"1000"'

actions:
    - name: compile_the_code
      script: python3 -m compileall . -q
      run_always: false
    - name: run_structural_tests
      script: pytest structural/* --junitxml=test-reports/structural-results.xml
      run_always: false
    - name: run_behavior_tests
      script: pytest behavior/* --junitxml=test-reports/behavior-results.xml
      run_always: false
    - name: junit
      parameters:
          ignore_time: false
          test_results: test-reports/*results.xml
      platform: bamboo
      kind: junit
      run_always: true
