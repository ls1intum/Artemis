# ----------------------------------------------------------------------------------------------------------------------
# Artemis-Dev-MySQL Setup
# ----------------------------------------------------------------------------------------------------------------------

services:
    artemis-app:
        extends:
            file: ./artemis/artemis.yml
            service: artemis-app
        ports:
            - "5005:5005" # Java Remote Debugging port declared in the java cmd options
        # also expose the port to make it reachable docker internally even if the external port mapping changes
        expose:
            - "5005"
        environment:
            JAVA_REMOTE_DEBUG: true
            SPRING_PROFILES_ACTIVE: artemis,scheduling,athene,dev,docker
        depends_on:
            mysql:
                condition: service_healthy
    mysql:
        extends:
            file: mysql.yml
            service: mysql

networks:
    artemis:
        driver: "bridge"
        name: artemis
volumes:
    artemis-mysql-data:
        name: artemis-mysql-data
    artemis-data:
        name: artemis-data
