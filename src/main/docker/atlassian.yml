# ----------------------------------------------------------------------------------------------------------------------
# Atlassian Setup
# ----------------------------------------------------------------------------------------------------------------------

services:
    jira:
        container_name: artemis-jira
        image: ghcr.io/ls1intum/artemis-jira:8.20.11
        volumes:
          - artemis-jira-data:/var/atlassian/application-data/jira
        ports:
            - "8081:8080"
        networks:
            - artemis
    bitbucket:
        container_name: artemis-bitbucket
        image: ghcr.io/ls1intum/artemis-bitbucket:7.21.4
        volumes:
            - artemis-bitbucket-data:/var/atlassian/application-data/bitbucket
        environment:
            - SPRING_APPLICATION_JSON={"plugin":{"ssh":{"baseurl":"ssh://bitbucket:7999"}}}
        ports:
            - "7990:7990"
            - "7999:7999"
        networks:
            - artemis
    bamboo:
        container_name: artemis-bamboo
        image: ghcr.io/ls1intum/artemis-bamboo:8.2.5
        volumes:
            - artemis-bamboo-data:/var/atlassian/application-data/bamboo
        ports:
            - "54663:54663"
            - "8085:8085"
        networks:
            - artemis

networks:
    artemis:
        driver: "bridge"
        name: artemis
volumes:
    artemis-jira-data:
        name: artemis-jira-data
    artemis-bitbucket-data:
        name: artemis-bitbucket-data
    artemis-bamboo-data:
        name: artemis-bamboo-data
