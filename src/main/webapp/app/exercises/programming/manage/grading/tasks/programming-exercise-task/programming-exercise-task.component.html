<div class="task">
    <div class="task__head">
        <button (click)="open = !open" class="task__collapse">
            <fa-icon class="me-2" [icon]="open ? faAngleDown : faAngleRight"></fa-icon>
        </button>

        <div class="task__row">
            <div class="task__row__cell">
                <span class="task__field">{{ task.taskName }}</span>
            </div>
            <div class="task__row__cell">
                <input type="text" class="form-control" min="0" [(ngModel)]="task.weight" name="{{ task.taskName }}-name" (change)="updateTests()" />
            </div>
            <div class="task__row__cell">
                <input type="text" class="form-control" min="0" [(ngModel)]="task.bonusMultiplier" name="{{ task.taskName }}-bonusMultiplier" (change)="updateTests()" />
            </div>
            <div class="task__row__cell">
                <input type="text" class="form-control" min="0" [(ngModel)]="task.bonusPoints" name="{{ task.taskName }}-bonusPoints" (change)="updateTests()" />
            </div>
            <div class="task__row__cell">
                <select [(ngModel)]="task.visibility" class="form-select" name="{{ task.taskName }}-visibility" (change)="updateTests()">
                    <option *ngFor="let s of testCaseVisibilityList">
                        {{ 'artemisApp.programmingExerciseTestCase.visibility.' + s.name | artemisTranslate }}
                    </option>
                </select>
            </div>
            <div class="task__row__cell">
                <span class="task__field">{{ task.resultingPoints }}P {{ task.resultingPointsPercent }}%</span>
            </div>
            <div class="task__row__cell">
                <span class="task__field">{{ task.type }}</span>
            </div>
            <div class="task__row__cell">
                <jhi-test-case-passed-builds-chart></jhi-test-case-passed-builds-chart>
            </div>
        </div>
    </div>

    <div *ngIf="open" class="task__body">
        <div *ngFor="let test of task.testCases" class="task__row">
            <div class="task__row__cell">
                <span class="task__field ps-3">{{ test.testName }}</span>
            </div>
            <div class="task__row__cell">
                <input type="text" class="form-control" min="0" [(ngModel)]="test.weight" name="{{ test.testName }}-name" (change)="updateTask()" />
            </div>
            <div class="task__row__cell">
                <input type="text" class="form-control" min="0" [(ngModel)]="test.bonusMultiplier" name="{{ test.testName }}-bonusMultiplier" (change)="updateTask()" />
            </div>
            <div class="task__row__cell">
                <input type="text" class="form-control" min="0" [(ngModel)]="test.bonusPoints" name="{{ test.testName }}-bonusPoints" (change)="updateTask()" />
            </div>
            <div class="task__row__cell">
                <select [(ngModel)]="test.visibility" class="form-select" name="{{ test.testName }}-visibility" (change)="updateTask()">
                    <option *ngFor="let s of testCaseVisibilityList" [value]="s.value">
                        {{ 'artemisApp.programmingExerciseTestCase.visibility.' + s.name | artemisTranslate }}
                    </option>
                </select>
            </div>
            <div class="task__row__cell">
                <span class="task__field">Points</span>
            </div>
            <div class="task__row__cell">
                <span class="task__field">{{ test.type }}</span>
            </div>
            <div class="task__row__cell">
                <jhi-test-case-passed-builds-chart></jhi-test-case-passed-builds-chart>
            </div>
        </div>
    </div>
</div>
