<div class="plagiarism-inspector">
    <div class="plagiarism-header">
        <div class="plagiarism-header-top">
            <h3 class="plagiarism-page-title">{{ 'artemisApp.plagiarism.plagiarism-detection' | translate }}</h3>

            <div class="plagiarism-warning">
                <fa-icon [icon]="'exclamation-triangle'" id="plagiarismCaution"></fa-icon>
                <span>{{ 'artemisApp.plagiarism.caution' | translate }}</span>
            </div>
        </div>

        <div class="plagiarism-buttons">
            <button class="check-plagiarism btn btn-primary" (click)="checkPlagiarism()" [disabled]="detectionInProgress">
                <span jhiTranslate="artemisApp.textExercise.checkPlagiarism">Check Plagiarism</span>
            </button>

            <div ngbDropdown *ngIf="plagiarismResult">
                <button class="btn btn-secondary btn-block" id="download-plagiarism" ngbDropdownToggle>
                    <span>Download</span>
                </button>
                <div ngbDropdownMenu aria-labelledby="download-plagiarism">
                    <button type="button" (click)="downloadPlagiarismResultsJson()" ngbDropdownItem>JSON</button>
                    <button type="button" (click)="downloadPlagiarismResultsCsv()" ngbDropdownItem>CSV</button>
                </div>
            </div>

            <label *ngIf="isProgrammingExercise()" class="plagiarism-checkbox" for="generateJPlagReport">
                <input type="checkbox" id="generateJPlagReport" [(ngModel)]="generateJPlagReport" checked />
                <span jhiTranslate="artemisApp.plagiarism.generate-jplag-report">Generate JPlag Report</span>
            </label>
        </div>
    </div>

    <div class="plagiarism-body" *ngIf="plagiarismResult">
        <jhi-plagiarism-sidebar
            [(showRunDetails)]="showRunDetails"
            [comparisons]="plagiarismResult?.comparisons"
            (selectIndex)="selectComparisonAtIndex($event)"
            [activeIndex]="selectedComparisonIndex"
        ></jhi-plagiarism-sidebar>

        <jhi-plagiarism-details [hidden]="showRunDetails" [comparison]="plagiarismResult?.comparisons[selectedComparisonIndex]" [exercise]="exercise"></jhi-plagiarism-details>

        <jhi-plagiarism-run-details [hidden]="!showRunDetails" [plagiarismResult]="plagiarismResult"></jhi-plagiarism-run-details>
    </div>

    <div class="plagiarism-empty" *ngIf="!plagiarismResult">
        <div class="spinner-border text-primary" role="status" *ngIf="detectionInProgress">
            <span class="sr-only">Loading...</span>
        </div>

        <span class="plagiarism-empty-label" *ngIf="!detectionInProgress">
            {{ 'artemisApp.plagiarism.empty' | translate }}
        </span>
    </div>
</div>
