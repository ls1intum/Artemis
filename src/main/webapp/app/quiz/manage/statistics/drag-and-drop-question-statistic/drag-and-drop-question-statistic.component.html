@if (quizExercise) {
    <div class="row">
        <div class="col-md-8 offset-md-2 text-center">
            @if (quizExercise.title !== question.title) {
                <h3>{{ quizExercise.title }}</h3>
            }
            <div class="row">
                @if (question) {
                    <div class="col">
                        <h3>
                            {{ question.title }}
                            @if (question.invalid) {
                                <span class="invalid-question" jhiTranslate="artemisApp.showStatistic.invalid"></span>
                            }
                        </h3>
                        <h4 [innerHTML]="questionTextRendered"></h4>
                        <div #containerRef>
                            <div class="row">
                                <div class="col-md-7 text-start">
                                    <p id="text" class="chart-title-text">
                                        @if (rated) {
                                            <span jhiTranslate="artemisApp.showStatistic.questionStatistic.titleRated"></span>
                                        }
                                        @if (!rated) {
                                            <span jhiTranslate="artemisApp.showStatistic.questionStatistic.titleUnrated"></span>
                                        }
                                    </p>
                                </div>
                                <div class="col-md-5 text-end">
                                    <p class="chart-title-text">
                                        <span>{{ participants }} </span><span jhiTranslate="artemisApp.showStatistic.participants"></span>
                                    </p>
                                </div>
                            </div>
                            <ngx-charts-bar-vertical
                                [view]="[containerRef.offsetWidth, 525]"
                                [results]="ngxData"
                                [scheme]="ngxColor"
                                [showDataLabel]="true"
                                [showXAxisLabel]="true"
                                [showYAxisLabel]="true"
                                [xAxisLabel]="xAxisLabel"
                                [yAxisLabel]="yAxisLabel"
                                [xAxis]="true"
                                [yAxis]="true"
                                [yScaleMax]="maxScale"
                                [tooltipDisabled]="true"
                                [rotateXAxisTicks]="false"
                                [maxXAxisTickLength]="17"
                                [dataLabelFormatting]="bindFormatting"
                                [roundEdges]="false"
                            />
                            <div class="col-md-12 text-center button-row">
                                <button (click)="switchSolution()" type="button" class="btn btn-primary show-solution">
                                    @if (showSolution) {
                                        <fa-icon [icon]="faCheckCircle" />
                                    }
                                    &nbsp;
                                    @if (!showSolution) {
                                        <fa-icon [icon]="faTimesCircle" />
                                    }
                                    &nbsp;
                                    @if (showSolution) {
                                        <span jhiTranslate="artemisApp.showStatistic.dragAndDropQuestionStatistic.hideSampleSolution"></span>
                                    }
                                    @if (!showSolution) {
                                        <span jhiTranslate="artemisApp.showStatistic.dragAndDropQuestionStatistic.showSampleSolution"></span>
                                    }
                                </button>
                                <button (click)="switchRated()" type="button" class="btn btn-primary">
                                    <fa-icon [icon]="faSync" />&nbsp;
                                    @if (rated) {
                                        <span jhiTranslate="artemisApp.showStatistic.switchToUnrated"></span>
                                    }
                                    @if (!rated) {
                                        <span jhiTranslate="artemisApp.showStatistic.switchToRated"></span>
                                    }
                                </button>
                            </div>
                            <p>&nbsp;</p>
                            <div class="drag-and-drop-quizStatistic-picture col-md-8 offset-md-2">
                                @if (question.backgroundFilePath) {
                                    <jhi-secured-image [src]="question.backgroundFilePath" />
                                }
                                <div class="click-layer">
                                    @if (!showSolution) {
                                        <div>
                                            @for (dropLocation of question.dropLocations; track dropLocation; let i = $index) {
                                                <div
                                                    id="drop-location"
                                                    class="drop-location"
                                                    [ngStyle]="{
                                                        top: dropLocation.posY! / 2 + '%',
                                                        left: dropLocation.posX! / 2 + '%',
                                                        width: dropLocation.width! / 2 + '%',
                                                        height: dropLocation.height! / 2 + '%',
                                                    }"
                                                >
                                                    <div class="letter">
                                                        <span>{{ getLetter(i) + '.' }}</span>
                                                    </div>
                                                    @if (dropLocation.invalid) {
                                                        <div class="invalid">
                                                            <span jhiTranslate="artemisApp.showStatistic.invalid"></span>
                                                        </div>
                                                    }
                                                </div>
                                            }
                                        </div>
                                    }
                                    @if (showSolution) {
                                        <div>
                                            @for (dropLocation of question.dropLocations; track dropLocation; let i = $index) {
                                                <div
                                                    class="drop-location solution"
                                                    [ngStyle]="{
                                                        top: dropLocation.posY! / 2 + '%',
                                                        left: dropLocation.posX! / 2 + '%',
                                                        width: dropLocation.width! / 2 + '%',
                                                        height: dropLocation.height! / 2 + '%',
                                                    }"
                                                >
                                                    <div class="letter-solution">
                                                        <span>{{ getLetter(i) + '.' }}</span>
                                                    </div>
                                                    @if (dropLocation.invalid) {
                                                        <div class="invalid">
                                                            <span jhiTranslate="artemisApp.showStatistic.invalid"></span>
                                                        </div>
                                                    }
                                                    @if (correctDragItemForDropLocation(dropLocation)) {
                                                        <jhi-drag-item [dragItem]="correctDragItemForDropLocation(dropLocation)!" [clickDisabled]="true" [minWidth]="'100%'" />
                                                    }
                                                </div>
                                            }
                                        </div>
                                    }
                                </div>
                            </div>
                            @if (!showSolution) {
                                <div class="drag-and-drop-quizStatistic-picture">
                                    <h4>Drag-Items:</h4>
                                    @if (question.dragItems && question.dragItems.length) {
                                        <div class="drag-items">
                                            @for (dragItem of question.dragItems; track dragItem) {
                                                <jhi-drag-item [dragItem]="dragItem" [invalid]="!!dragItem.invalid" [clickDisabled]="true" [minWidth]="'100%'" />
                                            }
                                        </div>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>
        </div>
        <jhi-quiz-statistics-footer />
    </div>
}
