@if (!isLoading()) {
    <div>
        <p-dialog [(visible)]="showDialog" [modal]="true" [closable]="false" [style]="{ width: '900px', height: 'auto' }" [appendTo]="'body'" [draggable]="false">
            <ng-template pTemplate="header">
                <h5 jhiTranslate="artemisApp.quizTraining.theQuizTraining"></h5>
            </ng-template>

            <div class="training-description mb-3">
                <p-accordion value="0">
                    <p-accordion-panel value="0">
                        <p-accordion-header jhiTranslate="artemisApp.quizTraining.howItWorks.title" />
                        <p-accordion-content>
                            <p jhiTranslate="artemisApp.quizTraining.howItWorks.content"></p>
                        </p-accordion-content>
                    </p-accordion-panel>

                    <p-accordion-panel value="1">
                        <p-accordion-header jhiTranslate="artemisApp.quizTraining.leagues.title" />
                        <p-accordion-content>
                            <p jhiTranslate="artemisApp.quizTraining.leagues.content"></p>
                        </p-accordion-content>
                    </p-accordion-panel>

                    <p-accordion-panel value="2">
                        <p-accordion-header jhiTranslate="artemisApp.quizTraining.scoring.title" />
                        <p-accordion-content>
                            <p jhiTranslate="artemisApp.quizTraining.scoring.content"></p>
                        </p-accordion-content>
                    </p-accordion-panel>
                </p-accordion>
            </div>

            <div class="leaderboard-toggle mb-3 d-flex align-items-center">
                <p-toggleswitch [(ngModel)]="showInLeaderboard" />
                <span class="ms-2" jhiTranslate="artemisApp.quizTraining.showInLeaderboard"></span>
            </div>

            <ng-template pTemplate="footer">
                <jhi-button [title]="'artemisApp.quizTraining.save'" (click)="onSaveDialog()" />
            </ng-template>
        </p-dialog>

        @if (!isFirstVisit() && isDataLoaded()) {
            <div class="header-section d-flex">
                <div class="ms-auto d-flex align-items-center">
                    <jhi-button (onClick)="navigateToTraining()" class="button-class" [title]="'artemisApp.exercise.startTraining'" />
                </div>
            </div>

            <hr class="mt-2 mb-4" />

            <div class="main-body-section">
                <div class="legend-section p-3">
                    <h5 jhiTranslate="artemisApp.quizTraining.scorecard"></h5>
                    <div class="league-display">
                        <jhi-league-badge
                            [league]="league()"
                            [points]="points()"
                            [pointsBronzeLeague]="pointsBronzeLeague"
                            [pointsSilverLeague]="pointsSilverLeague"
                            [pointsGoldLeague]="pointsGoldLeague"
                            [pointsDiamondLeague]="pointsDiamondLeague"
                        />
                    </div>
                    <div class="due-date-container mt-5">
                        <fa-icon [icon]="faClock" />
                        @if (!dueIn().isValid) {
                            <span jhiTranslate="artemisApp.quizTraining.noData"></span>
                        } @else if (dueIn().isPast) {
                            <span jhiTranslate="artemisApp.quizTraining.dueNow"></span>
                        } @else {
                            <span>
                                <span jhiTranslate="artemisApp.quizTraining.nextQuestionsDue"></span>
                                @if (dueIn().days > 0) {
                                    <span>{{ dueIn().days }} d, </span>
                                }
                                @if (dueIn().hours > 0 || dueIn().days > 0) {
                                    <span>{{ dueIn().hours }} h, </span>
                                }
                                <span>{{ dueIn().minutes }} min</span>
                            </span>
                        }
                    </div>
                    <div>
                        <span> <fa-icon [icon]="faQuestion" /> {{ totalQuestions() }} <span jhiTranslate="artemisApp.quizTraining.totalQuestions"></span> </span>
                    </div>
                    <div>
                        <span> <fa-icon [icon]="faCheck" /> {{ correctQuestions() }} <span jhiTranslate="artemisApp.quizTraining.correctQuestions"></span> </span>
                    </div>
                    <div>
                        <span> <fa-icon [icon]="faXmark" /> {{ wrongQuestions() }} <span jhiTranslate="artemisApp.quizTraining.wrongQuestions"></span> </span>
                    </div>
                    <div class="mt-3">
                        <p-button (click)="showInfoDialog()" severity="secondary" label="View Info" />
                        <p-dialog [(visible)]="displayInfoDialog" [modal]="true" [style]="{ width: '600px', height: 'auto' }" appendTo="body">
                            <ng-template pTemplate="header">
                                <h5 jhiTranslate="artemisApp.quizTraining.theQuizTraining"></h5>
                            </ng-template>
                            <h6 jhiTranslate="artemisApp.quizTraining.howItWorks.title"></h6>
                            <p jhiTranslate="artemisApp.quizTraining.howItWorks.content"></p>
                            <h6 jhiTranslate="artemisApp.quizTraining.leagues.title"></h6>
                            <p jhiTranslate="artemisApp.quizTraining.leagues.content"></p>
                            <h6 jhiTranslate="artemisApp.quizTraining.scoring.title"></h6>
                            <p jhiTranslate="artemisApp.quizTraining.scoring.content"></p>
                        </p-dialog>
                    </div>
                </div>
                <div class="leaderboard-section">
                    <jhi-leaderboard [leaderboard]="leaderboardEntries()" [currentUserId]="currentUserEntry()?.userId" [leaderboardName]="leaderboardName()" />
                </div>
            </div>
        }
    </div>
}
