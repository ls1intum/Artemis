@if (!isLoading()) {
    <div>
        <p-dialog [(visible)]="showDialog" [modal]="true" [closable]="false" [style]="{ width: '600px', height: 'auto' }" [appendTo]="'body'" [draggable]="false">
            <ng-template pTemplate="header">
                <h5 jhiTranslate="artemisApp.quizTraining.theQuizTraining"></h5>
            </ng-template>
            <h6 jhiTranslate="artemisApp.quizTraining.howItWorks.title"></h6>
            <p jhiTranslate="artemisApp.quizTraining.howItWorks.content"></p>
            <h6 jhiTranslate="artemisApp.quizTraining.leagues.title"></h6>
            <p jhiTranslate="artemisApp.quizTraining.leagues.content"></p>
            <div class="d-flex align-items-center">
                <jhi-league-icon [class]="'small-icon'" [league]="'Bronze'" />
                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.bronze"></p>
                <p class="mb-0 ms-4">0 - 50</p>
            </div>
            <div class="mt-2 d-flex align-items-center">
                <jhi-league-icon [class]="'small-icon'" [league]="'Silver'" />
                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.silver"></p>
                <p class="mb-0 ms-4">50 - 150</p>
            </div>
            <div class="mt-2 d-flex align-items-center">
                <jhi-league-icon [class]="'small-icon'" [league]="'Gold'" />
                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.gold"></p>
                <p class="mb-0 ms-4">150 - 300</p>
            </div>
            <div class="mt-2 d-flex align-items-center">
                <jhi-league-icon [class]="'small-icon'" [league]="'Diamond'" />
                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.diamond"></p>
                <p class="mb-0 ms-4">300 - 500</p>
            </div>
            <div class="mt-2 d-flex align-items-center">
                <jhi-league-icon [class]="'small-icon'" [league]="'Master'" />
                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.master"></p>
                <p class="mb-0 ms-4">500+</p>
            </div>
            <p class="mt-3" jhiTranslate="artemisApp.quizTraining.scoring.content"></p>

            <h6 class="mb-3" jhiTranslate="artemisApp.quizTraining.leaderboardSetting"></h6>
            <div class="leaderboard-toggle d-flex align-items-center">
                <p-toggleswitch [(ngModel)]="showInLeaderboard" />
                <span class="ms-2" jhiTranslate="artemisApp.quizTraining.showInLeaderboard"></span>
                <i
                    class="pi pi-question-circle ms-2"
                    [pTooltip]="'artemisApp.userSettings.quizTrainingSettings.leaderboardVisibilityInfo' | artemisTranslate"
                    tooltipPosition="right"
                >
                </i>
            </div>

            <ng-template pTemplate="footer">
                <jhi-button [title]="'artemisApp.quizTraining.save'" (click)="onSaveDialog()" />
            </ng-template>
        </p-dialog>

        @if (!isFirstVisit() && isDataLoaded()) {
            <div class="header-section d-flex">
                <div class="ms-auto d-flex align-items-center">
                    <jhi-button (onClick)="navigateToTraining()" class="button-class" [title]="'artemisApp.exercise.startTraining'" />
                </div>
            </div>

            <hr class="mt-2 mb-4" />

            <div class="main-body-section">
                <div class="legend-section p-3">
                    <h5 jhiTranslate="artemisApp.quizTraining.scorecard"></h5>
                    <div class="league-display">
                        <jhi-league-badge
                            [league]="league()"
                            [points]="points()"
                            [pointsBronzeLeague]="pointsBronzeLeague"
                            [pointsSilverLeague]="pointsSilverLeague"
                            [pointsGoldLeague]="pointsGoldLeague"
                            [pointsDiamondLeague]="pointsDiamondLeague"
                        />
                    </div>
                    <div class="due-date-container mt-5">
                        <fa-icon [icon]="faClock" />
                        @if (!dueIn().isValid) {
                            <span jhiTranslate="artemisApp.quizTraining.noData"></span>
                        } @else if (dueIn().isPast) {
                            <span jhiTranslate="artemisApp.quizTraining.dueNow"></span>
                        } @else {
                            <span>
                                <span jhiTranslate="artemisApp.quizTraining.nextQuestionsDue"></span>
                                @if (dueIn().days > 0) {
                                    <span>{{ dueIn().days }} d, </span>
                                }
                                @if (dueIn().hours > 0 || dueIn().days > 0) {
                                    <span>{{ dueIn().hours }} h, </span>
                                }
                                <span>{{ dueIn().minutes }} min</span>
                            </span>
                        }
                    </div>
                    <div>
                        <span> <fa-icon [icon]="faQuestion" /> {{ totalQuestions() }} <span jhiTranslate="artemisApp.quizTraining.totalQuestions"></span> </span>
                    </div>
                    <div>
                        <span> <fa-icon [icon]="faCheck" /> {{ correctQuestions() }} <span jhiTranslate="artemisApp.quizTraining.correctQuestions"></span> </span>
                    </div>
                    <div>
                        <span> <fa-icon [icon]="faXmark" /> {{ wrongQuestions() }} <span jhiTranslate="artemisApp.quizTraining.wrongQuestions"></span> </span>
                    </div>
                    <div class="mt-3">
                        <p-button (click)="showInfoDialog()" severity="secondary">
                            <span jhiTranslate="artemisApp.quizTraining.infoButton"></span>
                        </p-button>
                        <p-dialog [(visible)]="displayInfoDialog" [modal]="true" [style]="{ width: '600px', height: 'auto' }" appendTo="body">
                            <ng-template pTemplate="header">
                                <h5 jhiTranslate="artemisApp.quizTraining.theQuizTraining"></h5>
                            </ng-template>
                            <h6 jhiTranslate="artemisApp.quizTraining.howItWorks.title"></h6>
                            <p jhiTranslate="artemisApp.quizTraining.howItWorks.content"></p>
                            <h6 jhiTranslate="artemisApp.quizTraining.leagues.title"></h6>
                            <p jhiTranslate="artemisApp.quizTraining.leagues.content"></p>
                            <div class="d-flex align-items-center">
                                <jhi-league-icon [class]="'small-icon'" [league]="'Bronze'" />
                                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.bronze"></p>
                                <p class="mb-0 ms-4">0 - 50</p>
                            </div>
                            <div class="mt-2 d-flex align-items-center">
                                <jhi-league-icon [class]="'small-icon'" [league]="'Silver'" />
                                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.silver"></p>
                                <p class="mb-0 ms-4">50 - 150</p>
                            </div>
                            <div class="mt-2 d-flex align-items-center">
                                <jhi-league-icon [class]="'small-icon'" [league]="'Gold'" />
                                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.gold"></p>
                                <p class="mb-0 ms-4">150 - 300</p>
                            </div>
                            <div class="mt-2 d-flex align-items-center">
                                <jhi-league-icon [class]="'small-icon'" [league]="'Diamond'" />
                                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.diamond"></p>
                                <p class="mb-0 ms-4">300 - 500</p>
                            </div>
                            <div class="mt-2 d-flex align-items-center">
                                <jhi-league-icon [class]="'small-icon'" [league]="'Master'" />
                                <p class="mb-0 ms-2" jhiTranslate="artemisApp.quizTraining.master"></p>
                                <p class="mb-0 ms-4">500+</p>
                            </div>
                            <p class="mt-3" jhiTranslate="artemisApp.quizTraining.scoring.content"></p>
                        </p-dialog>
                    </div>
                </div>
                <div class="leaderboard-section">
                    <jhi-leaderboard [leaderboard]="leaderboardEntries()" [currentUserId]="currentUserEntry()?.userId" [leaderboardName]="leaderboardName()" />
                </div>
            </div>
        }
    </div>
}
