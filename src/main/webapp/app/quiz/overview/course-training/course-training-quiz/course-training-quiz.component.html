<div>
    @if (questionsLoaded()) {
        @if (!isRated()) {
            <p-dialog [(visible)]="showUnratedConfirmation" [modal]="true" [closable]="false" [draggable]="false" [style]="{ width: '450px' }">
                <ng-template pTemplate="header">
                    <h5 jhiTranslate="artemisApp.quizQuestion.unratedConfirmationTitle"></h5>
                </ng-template>

                <p jhiTranslate="artemisApp.quizQuestion.unratedConfirmation"></p>

                <ng-template pTemplate="footer">
                    <p-button (onClick)="confirmUnratedPractice()">
                        <span jhiTranslate="global.generic.yes"></span>
                    </p-button>
                    <p-button (onClick)="cancelUnratedPractice()" severity="secondary" S>
                        <span jhiTranslate="global.generic.no"></span>
                    </p-button>
                </ng-template>
            </p-dialog>
        }

        @if (currentQuestion(); as question) {
            @if (question.type === MULTIPLE_CHOICE) {
                <jhi-multiple-choice-question
                    [question]="question"
                    [selectedAnswerOptions]="selectedAnswerOptions"
                    (selectedAnswerOptionsChange)="selectedAnswerOptions = $event"
                    [questionIndex]="currentIndex() + 1"
                    [showResult]="showingResult"
                    [score]="questionScores"
                />
            }
            @if (question.type === SHORT_ANSWER) {
                <jhi-short-answer-question
                    [question]="question"
                    [submittedTexts]="shortAnswerSubmittedTexts"
                    (submittedTextsChange)="shortAnswerSubmittedTexts = $event"
                    [questionIndex]="currentIndex() + 1"
                    [showResult]="showingResult"
                    [score]="questionScores"
                    [forceSampleSolution]="false"
                />
            }
            @if (question.type === DRAG_AND_DROP) {
                <jhi-drag-and-drop-question
                    [question]="question"
                    [mappings]="dragAndDropMappings"
                    (mappingsChange)="dragAndDropMappings = $event"
                    [questionIndex]="currentIndex() + 1"
                    [showResult]="showingResult"
                    [score]="questionScores"
                    [forceSampleSolution]="false"
                />
            }
        }
        @if (!submitted) {
            <jhi-button id="submit-question" class="ms-2" (onClick)="onSubmit()" [title]="'artemisApp.exercise.submit'" />
        }
        @if (submitted) {
            @if (isLastQuestion()) {
                <jhi-button class="ms-2" (onClick)="navigateToTraining()" [title]="'artemisApp.exercise.endTraining'" />
            } @else {
                <jhi-button class="ms-2" (onClick)="nextQuestion()" [title]="'artemisApp.exercise.nextQuestion'" />
            }
        }
    }
</div>
