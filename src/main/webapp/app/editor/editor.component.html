<div class="editor-wrapper">

    <nav class="navbar navbar-light navbar-expand-md jh-navbar">
        <div class="jh-logo-container float-left editor-top-left">
            <a class="logo float-left" routerLink="/" (click)="collapseNavbar()">
                <span jhiTranslate="global.title" class="navbar-title">ArTEMiS:</span> <span>{{participation.exercise.course.title}}</span>
            </a>
        </div>
        <div class="navbar-collapse collapse editor-top-right">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item dropdown pointer">
                    <!-- TODO: migrate on-new-result; show-score -->
                    <result participation="participation" [hidden]="isBuilding" on-new-result="$ctrl.updateLatestResult($event)" show-score="true"></result>
                    <button type="button" class="btn btn-primary navbar-btn" [disabled]="!isSaved || isBuilding" (click)="commit($event)" data-toggle="tooltip" data-placement="left" title="Stage, commit, push, build and test your changes.">
                        <span *ngIf="isBuilding"><i class="fa fa-circle-o-notch fa-spin"></i> Building</span>
                        <span *ngIf="!isBuilding"><i class="fa fa-play-circle-o"></i> Commit & Run Tests</span>
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <div class="editor-main">
        <div class="editor-sidebar-left">
            <!-- TODO: replace resizable directive -->
            <!-- TODO: https://github.com/mattlewis92/angular-resizable-element -->
            <div class="card" resizable r-directions="['right']" r-width="250" id="cardFiles">
                <div class="card-header bg-primary text-white" (click)="toggleCollapse($event, false)">
                    <span class="pull-right "><i class="fa fa-chevron-left"></i></span>
                    <h3 class="card-title">
                        <i class="fa fa-folder-open"></i>
                        <span> &nbsp; {{participation.exercise.title}}</span>
                    </h3>
                </div>

                <!-- TODO: migrate directive arguments -->
                <editor-file-browser participation="participation" file="file" on-created-file="$ctrl.isCommitted = false" on-deleted-file="$ctrl.isCommitted = false" repository-files="$ctrl.repositoryFiles"></editor-file-browser>

                <div class="card-footer" [innerHtml]="saveStatusLabel | safeHtml"></div>
                <div class="card-footer">
                    <span *ngIf="isCommitted">
                        <i class="fa fa-check-circle text-success"></i> <span class="text-success"> All changes committed.</span>
                    </span>
                    <span *ngIf="!isCommitted">
                        <i class="fa fa-warning text-warning"></i> <span class="text-warning"> There are uncommitted changes.</span>
                    </span>
                </div>
            </div>
        </div>

        <div class="editor-center">
            <!-- TODO: check directive arguments -->
            <editor-ace participation="participation" file="$ctrl.file" on-save-status-change="$ctrl.updateSaveStatusLabel($event)"></editor-ace>
        </div>

        <div class="editor-sidebar-right">
            <!-- TODO: check directive arguments -->
            <editor-instructions *ngIf="repositoryFiles" participation="participation" latest-result="$ctrl.latestResult"></editor-instructions>
        </div>
    </div>

    <div class="editor-bottom">
        <!-- TODO: check directive arguments -->
        <editor-build-output participation="participation" is-building="isBuilding"></editor-build-output>
    </div>

</div>
