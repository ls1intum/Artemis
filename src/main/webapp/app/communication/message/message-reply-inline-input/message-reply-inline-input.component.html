<form [formGroup]="formGroup" (ngSubmit)="confirm()">
    <div class="message-inline-input-form__wrapper mb-3 me-1">
        <jhi-posting-markdown-editor
            formControlName="content"
            [activeConversation]="activeConversation()"
            [editorHeight]="editorHeight"
            [maxContentLength]="maxContentLength"
            [isInputLengthDisplayed]="false"
            (keydown.enter)="confirm()"
            (valueChange)="valueChange.emit()"
            [isButtonLoading]="isLoading"
            [isFormGroupValid]="formGroup.valid"
            [editType]="editType"
        />
        <div class="col mt-1">
            @if (!warningDismissed) {
                <div class="alert alert-warning alert-dismissible text-start fade show" role="alert">
                    <button type="button" class="btn-close" (click)="closeAlert()" aria-label="Close"></button>
                    <h4 class="alert-heading" jhiTranslate="artemisApp.messageWarning.headerText"></h4>
                    <p jhiTranslate="artemisApp.messageWarning.mainParagraph"></p>
                    <hr />
                    <p class="mb-0" jhiTranslate="artemisApp.messageWarning.lastParagraph"></p>
                </div>
            }
            <div class="d-flex justify-content-between align-items-center">
                @if (editType !== EditType.UPDATE) {
                    <div class="message-checkbox">
                        <input type="checkbox" id="messageCheckbox" [checked]="sendAsDirectMessage()" (change)="toggleSendAsDirectMessage()" />
                        @if (this.activeConversation()!.type === 'channel') {
                            <label for="messageCheckbox" jhiTranslate="artemisApp.conversationsLayout.sendToChannel" [translateValues]="{ channelName: this.channelName }"> </label>
                        } @else if (this.activeConversation()!.type === 'oneToOneChat') {
                            <label for="messageCheckbox" jhiTranslate="artemisApp.conversationsLayout.sendAsDirectMessage"></label>
                        } @else {
                            <label for="messageCheckbox" jhiTranslate="artemisApp.conversationsLayout.sendToGroup"></label>
                        }
                    </div>
                } @else {
                    <div class="d-flex gap-2">
                        <button
                            jhi-posting-button
                            [buttonLabel]="'artemisApp.metis.cancel' | artemisTranslate"
                            class="btn btn-sm btn-outline-secondary"
                            (click)="isModalOpen.emit()"
                        ></button>
                        <button
                            jhi-posting-button
                            [buttonLoading]="isLoading"
                            [disabled]="isLoading || !formGroup.valid"
                            [buttonLabel]="'artemisApp.conversationsLayout.saveMessage' | artemisTranslate"
                            class="btn btn-sm btn-outline-primary"
                            id="save"
                            type="submit"
                        ></button>
                    </div>
                }
            </div>
        </div>
    </div>
</form>
