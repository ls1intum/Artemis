<div class="frame">
    <section>
        <h3>General Information</h3>

        <div class="label-and-input-row">
            <div class="label-and-input">
                <label>Title</label>
                <p-inputgroup>
                    @let titleValidation = titleValidationResult();
                    <p-inputgroup-addon>
                        <i class="pi pi-language"></i>
                    </p-inputgroup-addon>
                    <input
                        pInputText
                        [(ngModel)]="title"
                        placeholder="Title"
                        [invalid]="titleValidation.status === TutorialEditValidationStatus.INVALID"
                        (blur)="titleInputTouched.set(true)"
                    />
                    @if (titleValidation.status === TutorialEditValidationStatus.INVALID) {
                        <p-inputgroup-addon [pTooltip]="titleValidation.message" tooltipPosition="bottom">
                            <i class="pi pi-info-circle danger"></i>
                        </p-inputgroup-addon>
                    }
                </p-inputgroup>
            </div>

            <div class="label-and-input">
                @let tutorValidation = tutorValidationResult();
                <label>Tutor</label>
                <p-inputgroup class="field-control right-control">
                    <p-inputgroup-addon><i class="pi pi-user"></i></p-inputgroup-addon>
                    <p-select
                        optionLabel="nameAndLogin"
                        optionValue="id"
                        filterBy="nameAndLogin"
                        placeholder="Tutor"
                        [options]="tutors()"
                        [(ngModel)]="selectedTutorId"
                        [filter]="true"
                        [invalid]="tutorValidation.status === TutorialEditValidationStatus.INVALID"
                        [showClear]="true"
                        (onBlur)="tutorInputTouched.set(true)"
                    />
                    @if (tutorValidation.status === TutorialEditValidationStatus.INVALID) {
                        <p-inputgroup-addon [pTooltip]="tutorValidation.message" tooltipPosition="bottom">
                            <i class="pi pi-info-circle danger"></i>
                        </p-inputgroup-addon>
                    }
                </p-inputgroup>
            </div>
        </div>

        <div class="label-and-input-row">
            <jhi-tutorial-edit-languages-input [alreadyUsedLanguages]="['German', 'English']" [(language)]="language" />

            <div class="label-and-input">
                <label>Mode</label>
                <p-inputgroup>
                    <p-inputgroup-addon><i class="pi pi-compass"></i></p-inputgroup-addon>
                    <p-select [options]="modes" [(ngModel)]="selectedMode" optionLabel="name" placeholder="Mode" />
                </p-inputgroup>
            </div>
        </div>

        <div class="label-and-input-row">
            <div class="label-and-input">
                <label>Campus</label>
                <p-inputgroup>
                    @let campusValidation = campusValidationResult();
                    <p-inputgroup-addon>
                        <i class="pi pi-building"></i>
                    </p-inputgroup-addon>
                    <input pInputText [(ngModel)]="campus" placeholder="Campus" [invalid]="campusValidation.status === TutorialEditValidationStatus.INVALID" />
                    @if (campusValidation.status === TutorialEditValidationStatus.INVALID) {
                        <p-inputgroup-addon [pTooltip]="campusValidation.message" tooltipPosition="bottom">
                            <i class="pi pi-info-circle danger"></i>
                        </p-inputgroup-addon>
                    }
                </p-inputgroup>
            </div>

            <div class="label-and-input">
                <label>Capacity</label>
                <p-inputgroup>
                    <p-inputgroup-addon><i class="pi pi-hashtag"></i></p-inputgroup-addon>
                    <p-inputnumber [(ngModel)]="capacity" placeholder="Capacity" [min]="1" [showButtons]="true" />
                </p-inputgroup>
            </div>
        </div>

        <div class="label-and-input-row">
            <div class="label-and-input">
                <label>Additional Information</label>
                <p-inputgroup>
                    <input type="text" placeholder="Additional Information" pInputText [(ngModel)]="additionalInformation" />
                </p-inputgroup>
            </div>
            <div class="spacer"></div>
        </div>
    </section>

    <section>
        <div class="session-plan-section-header">
            <h3>Plan Sessions</h3>
            <p-toggleswitch [(ngModel)]="configureSessionPlan" />
        </div>

        @if (configureSessionPlan()) {
            <div class="label-and-input-row">
                <div class="label-and-input">
                    <label>First Session Start</label>
                    <p-inputgroup>
                        @let firstSessionStartValidation = firstSessionStartValidationResult();
                        <p-datepicker
                            hourFormat="24"
                            placeholder="First Session Start"
                            [(ngModel)]="firstSessionStart"
                            [showTime]="true"
                            [invalid]="firstSessionStartValidation.status === TutorialEditValidationStatus.INVALID"
                            (onSelect)="firstSessionStartInputTouched.set(true)"
                        />
                        @if (firstSessionStartValidation.status === TutorialEditValidationStatus.INVALID) {
                            <p-inputgroup-addon [pTooltip]="firstSessionStartValidation.message" tooltipPosition="bottom">
                                <i class="pi pi-info-circle danger"></i>
                            </p-inputgroup-addon>
                        }
                    </p-inputgroup>
                </div>

                <div class="label-and-input">
                    <label>First Session End</label>
                    <p-inputgroup>
                        @let firstSessionEndValidation = firstSessionEndValidationResult();
                        <p-datepicker
                            hourFormat="24"
                            placeholder="First Session End"
                            [(ngModel)]="firstSessionEnd"
                            [showTime]="true"
                            [invalid]="firstSessionEndValidation.status === TutorialEditValidationStatus.INVALID"
                            (onSelect)="firstSessionEndInputTouched.set(true)"
                        />
                        @if (firstSessionEndValidation.status === TutorialEditValidationStatus.INVALID) {
                            <p-inputgroup-addon [pTooltip]="firstSessionEndValidation.message" tooltipPosition="bottom">
                                <i class="pi pi-info-circle danger"></i>
                            </p-inputgroup-addon>
                        }
                    </p-inputgroup>
                </div>
            </div>

            <div class="label-and-input-row">
                <div class="label-and-input">
                    <label>Repetition Frequency</label>
                    <p-inputgroup>
                        <p-inputnumber [(ngModel)]="repetitionFrequency" prefix="every " suffix=" week(s)" [min]="1" [showButtons]="true" />
                    </p-inputgroup>
                </div>

                <div class="label-and-input">
                    <label>Tutorial Period End</label>
                    <p-inputgroup>
                        @let tutorialPeriodEndValidation = tutorialPeriodEndValidationResult();
                        <p-datepicker
                            hourFormat="24"
                            placeholder="Tutorial Period End"
                            [(ngModel)]="tutorialPeriodEnd"
                            [showButtonBar]="true"
                            [invalid]="tutorialPeriodEndValidation.status === TutorialEditValidationStatus.INVALID"
                            (onSelect)="tutorialPeriodEndInputTouched.set(true)"
                        />
                        @if (tutorialPeriodEndValidation.status === TutorialEditValidationStatus.INVALID) {
                            <p-inputgroup-addon [pTooltip]="tutorialPeriodEndValidation.message" tooltipPosition="left">
                                <i class="pi pi-info-circle danger"></i>
                            </p-inputgroup-addon>
                        }
                    </p-inputgroup>
                </div>
            </div>

            <div class="label-and-input-row">
                <div class="label-and-input">
                    <label>Location</label>
                    <p-inputgroup>
                        @let locationValidation = locationValidationResult();
                        <input
                            type="text"
                            placeholder="Location"
                            pInputText
                            [(ngModel)]="location"
                            [invalid]="locationValidation.status === TutorialEditValidationStatus.INVALID"
                            (blur)="locationInputTouched.set(true)"
                        />
                        @if (locationValidation.status === TutorialEditValidationStatus.INVALID) {
                            <p-inputgroup-addon [pTooltip]="locationValidation.message" tooltipPosition="left">
                                <i class="pi pi-info-circle danger"></i>
                            </p-inputgroup-addon>
                        }
                    </p-inputgroup>
                </div>
                <div class="spacer"></div>
            </div>
        }
    </section>

    <div class="controls-footer">
        <a [routerLink]="['..']" pButton class="p-button-secondary p-button-sm" data-testid="cancel-button">Cancel</a>
        <button pButton class="p-button-primary p-button-sm" data-testid="save-button" (click)="save()">Save</button>
    </div>
</div>
<p-confirmDialog />
