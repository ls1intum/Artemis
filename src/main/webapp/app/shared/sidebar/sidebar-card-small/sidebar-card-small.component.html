<!-- Explicitly implemented query parameters for the messages module as a workaround, since routing in the messages module
 operates differently over the MetisConversations service, it will get adjusted in a followup PR -->
<div
    id="test-sidebar-card-small"
    class="pointer rounded-3 col-12 border-start border-5 highlight-card bg-module padding-small"
    [ngClass]="!!this.sidebarItem.conversation?.hasUnreadMessage ? 'border-primary' : 'border-module'"
    [routerLink]="itemSelected ? '../messages' : './messages'"
    [queryParams]="{ conversationId: sidebarItem?.id }"
    (click)="emitStoreAndRefresh(sidebarItem.id)"
    [routerLinkActive]="'bg-selected border-selected'"
>
    <div class="inline-block col-8">
        <jhi-sidebar-card-item [sidebarType]="sidebarType" [sidebarItem]="sidebarItem" />
    </div>
    @if (sidebarItem.conversation) {
        <div class="inline-block pb-2">
            <jhi-conversation-options [conversation]="sidebarItem.conversation!" (onUpdateSidebar)="onUpdateSidebar.emit()" />
        </div>
    }
</div>
