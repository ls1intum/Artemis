<div class="container">
    <div class="d-flex flex-wrap">
        <div class="d-flex align-items-center">
            <h2 jhiTranslate="artemisApp.standardizedCompetency.manage.title"></h2>
        </div>
        <div class="ms-auto justify-content-end">
            <!-- TODO link to knowledgeArea Management when ready -->
            <a class="btn btn-primary" id="knowledgeAreaButton" [routerLink]="['']">
                <span jhiTranslate="artemisApp.standardizedCompetency.manage.knowledgeAreasButton"></span>
            </a>
        </div>
    </div>
    <h4 jhiTranslate="artemisApp.standardizedCompetency.manage.filter"></h4>
    <div class="row">
        <div class="form-group col">
            <label for="title-input" jhiTranslate="artemisApp.standardizedCompetency.model.title"> </label>
            <input id="title-input" class="form-control" [(ngModel)]="title" />
        </div>
        <div class="form-group col">
            <label for="knowledge-area-select" jhiTranslate="artemisApp.standardizedCompetency.model.knowledgeArea"></label>
            <select [(ngModel)]="knowledgeAreaFilter" class="form-select" id="knowledge-area-select">
                <option [ngValue]="undefined"></option>
                @for (knowledgeArea of knowledgeAreaArray; track knowledgeArea.id) {
                    <option [ngValue]="knowledgeArea">
                        {{ knowledgeArea.title ?? '' }}
                    </option>
                }
            </select>
        </div>
    </div>
    <button class="btn btn-primary" (click)="filterByKnowledgeArea()">FILTER KAs</button>
    <div class="d-flex">
        <mat-tree [dataSource]="dataSourceNested" [treeControl]="treeControlNested" [trackBy]="trackBy" class="card d-flex flex-grow-1 me-1 example-tree">
            <mat-nested-tree-node *matTreeNodeDef="let node">
                <div class="card p-2 w-100 rounded-0">
                    <div class="d-flex align-items-center w-100 clickable">
                        <div class="icon-container me-2">
                            <fa-icon [icon]="faChevronRight" class="rotate-icon chevron-position" [class.rotated]="treeControlNested.isExpanded(node)" matTreeNodeToggle />
                        </div>
                        <h6 class="mb-0">{{ node.title }}</h6>
                    </div>
                </div>
                <div [class.example-tree-invisible]="!treeControlNested.isExpanded(node)" role="group">
                    <ng-container matTreeNodeOutlet />
                    @for (competency of node.competencies; track competency.id) {
                        <!-- TODO: if we do the filter here it is very expensive i guess -->
                        <div class="card p-2 w-100 rounded-0 mat-tree-node">
                            <span>{{ competency.title }}</span>
                        </div>
                    }
                </div>
            </mat-nested-tree-node>
        </mat-tree>
        <div class="card d-flex">I AM DETAIL CONTENT YIPPIEE</div>
    </div>
</div>
