<div class="modal-header">
    <h4 class="modal-title">{{ learningGoal?.title }}</h4>
    <button type="button" class="close" (click)="activeModal.close()">
        <span>&times;</span>
    </button>
</div>
<div class="modal-body">
    <p *ngIf="learningGoal?.description">{{ learningGoal?.description }}</p>
    <!-- Table for connected lecture units -->
    <ng-template #elseBlock>{{ 'artemisApp.learningGoal.learningGoalCard.noUnitsConnected' | translate }}</ng-template>
    <div *ngIf="learningGoal?.lectureUnits && learningGoal?.lectureUnits.length > 0; else elseBlock">
        <h5>{{ 'artemisApp.learningGoal.learningGoalCard.connectedLectureUnits' | translate }}</h5>
        <p>
            {{ 'artemisApp.learningGoal.learningGoalCard.connectedLectureUnitsExplanation' | translate }}
        </p>
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead class="thead-dark">
                    <tr jhiSort [(predicate)]="connectedLectureUnitsPredicate" [(ascending)]="connectedLectureUnitsReverse" [callback]="sortConnectedLectureUnits.bind(this)">
                        <th id="connectedLectureUnitLectureUnitNameHeader" class="bg-primary">
                            {{ 'artemisApp.learningGoal.createLearningGoal.lectureUnitTable.name' | translate }}
                        </th>
                        <th jhiSortBy="type" id="connectedLectureUnitTypeHeader">
                            {{ 'artemisApp.learningGoal.createLearningGoal.lectureUnitTable.type' | translate }}
                            <fa-icon [icon]="'sort'"></fa-icon>
                        </th>
                        <th jhiSortBy="lecture.title" id="connectedLectureUnitLectureTitleHeader">
                            {{ 'artemisApp.learningGoal.createLearningGoal.lectureUnitTable.lecture' | translate }}
                            <fa-icon [icon]="'sort'"></fa-icon>
                        </th>
                        <th id="connectedLectureUnitScoreAchievedHeader">
                            {{ 'artemisApp.learningGoal.createLearningGoal.lectureUnitTable.scoreAchievedByStudent' | translate }}
                        </th>
                        <th id="connectedLectureUnitPointsAchievableHeader">
                            {{ 'artemisApp.learningGoal.createLearningGoal.lectureUnitTable.totalPointsAchievable' | translate }}
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let lectureUnit of learningGoal.lectureUnits">
                        <td>
                            <a [routerLink]="['/courses', learningGoal?.course?.id, 'lectures', lectureUnit.lecture?.id]">
                                {{ lectureUnitService.getLectureUnitName(lectureUnit) ? lectureUnitService.getLectureUnitName(lectureUnit) : '' }}
                            </a>
                        </td>
                        <td>{{ lectureUnit.type ? lectureUnit.type : '' }}</td>
                        <td>
                            <a [routerLink]="['/courses', learningGoal?.course?.id, 'lectures', lectureUnit.lecture?.id]"
                                >{{ lectureUnit.lecture?.title ? lectureUnit.lecture?.title : '' }}
                            </a>
                        </td>
                        <td>
                            {{
                                getLectureUnitProgress(lectureUnit.id) === undefined
                                    ? '-'
                                    : round(getLectureUnitProgress(lectureUnit.id).scoreAchievedByStudentInLectureUnit) + ' %'
                            }}
                        </td>
                        <td>
                            {{ getLectureUnitProgress(lectureUnit.id) === undefined ? '-' : getLectureUnitProgress(lectureUnit.id).totalPointsAchievableByStudentsInLectureUnit }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div *ngIf="isProgressAvailable">
        <p class="text-muted">
            <span class="badge badge-info">Info</span>
            {{ 'artemisApp.learningGoal.learningGoalCard.exerciseNote' | translate }}
        </p>
        <div>
            <h5
                [jhiTranslate]="'artemisApp.learningGoal.learningGoalCard.progressExplanation'"
                class="text-primary"
                [translateValues]="{
                    points: learningGoalProgress.totalPointsAchievableByStudentsInLearningGoal,
                    progress: progressInPercent
                }"
            ></h5>
        </div>
    </div>
</div>
