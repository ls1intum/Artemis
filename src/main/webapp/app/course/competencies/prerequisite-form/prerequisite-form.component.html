<div>
    @if (form) {
        <form [formGroup]="form" (ngSubmit)="submit()">
            <div class="form-group">
                <label for="title">{{ 'artemisApp.competency.title' | artemisTranslate }}*</label>
                <input
                    type="text"
                    class="form-control"
                    id="title"
                    formControlName="title"
                    [placeholder]="'artemisApp.competency.createCompetency.titlePlaceholder' | artemisTranslate"
                />
                @if (form.controls.title.invalid && (form.controls.title.dirty || form.controls.title.touched)) {
                    <div class="alert alert-danger">
                        @if (form.controls.title.errors?.required) {
                            <span jhiTranslate="artemisApp.competency.createCompetency.titleRequiredValidationError"></span>
                        }
                        @if (form.controls.title.errors?.maxlength) {
                            <span
                                jhiTranslate="artemisApp.competency.createCompetency.titleMaxLengthValidationError"
                                [translateValues]="{ max: competencyValidators.TITLE_MAX }"
                            ></span>
                        }
                        @if (form.controls.title.errors?.titleUnique) {
                            <span jhiTranslate="artemisApp.competency.createCompetency.titleUniqueValidationError"></span>
                        }
                    </div>
                }
            </div>
            <div class="form-group">
                <label jhiTranslate="artemisApp.competency.description"></label>
                <jhi-markdown-editor
                    [markdown]="form.controls.description.value"
                    (markdownChange)="updateDescriptionControl($event)"
                    class="markdown-preview"
                    [enableFileUpload]="false"
                />
                @if (form.controls.description.invalid && form.controls.description.dirty) {
                    <div class="alert alert-danger">
                        <span
                            jhiTranslate="artemisApp.competency.createCompetency.descriptionMaxLengthValidationError"
                            [translateValues]="{ max: competencyValidators.DESCRIPTION_MAX }"
                        ></span>
                    </div>
                }
            </div>
            <div class="form-group">
                <jhi-date-time-picker
                    id="softDueDate"
                    labelName="{{ 'artemisApp.competency.createCompetency.softDueDate' | artemisTranslate }}"
                    labelTooltip="{{ 'artemisApp.competency.createCompetency.softDueDateHint' | artemisTranslate }}"
                    formControlName="softDueDate"
                />
            </div>
            <div class="form-group">
                <label for="taxonomy">
                    {{ 'artemisApp.competency.taxonomy' | artemisTranslate }}
                    @if (suggestedTaxonomies?.length) {
                        <small> ({{ 'artemisApp.competency.createCompetency.suggestedTaxonomy' | artemisTranslate }} : {{ suggestedTaxonomies.join(', ') }}) </small>
                    }
                </label>
                <jhi-taxonomy-select selectId="taxonomy" [form]="form.controls.taxonomy" />
            </div>
            <div class="form-group">
                <label for="masteryThreshold">
                    {{ 'artemisApp.competency.masteryThreshold' | artemisTranslate }}
                    : {{ form.controls.masteryThreshold.value }}%
                </label>
                <input type="range" min="0" max="100" class="form-range" id="masteryThreshold" formControlName="masteryThreshold" />
                <!-- TODO: use stuff here aswell -->
            </div>
            <div class="form-group">
                <input type="checkbox" class="form-check-input" id="optional" formControlName="optional" />
                <label class="form-control-label" jhiTranslate="artemisApp.competency.optional" for="optional"></label>
                <fa-icon [icon]="faQuestionCircle" class="text-secondary" ngbTooltip="{{ 'artemisApp.competency.optionalDescription' | artemisTranslate }}" />
            </div>
            <div>
                <jhi-button [btnType]="ButtonType.SECONDARY" [title]="'entity.action.cancel'" [icon]="faBan" (onClick)="cancel()" />
                <jhi-button [btnType]="ButtonType.PRIMARY" [title]="'entity.action.save'" [icon]="faSave" (onClick)="submit()" [disabled]="form.invalid" />
            </div>
        </form>
    }
</div>
