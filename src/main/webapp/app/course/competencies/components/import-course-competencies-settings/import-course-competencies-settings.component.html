<div class="import-settings-container p-3">
    <div class="row m-0">
        <ng-container *ngTemplateOutlet="importSettingTemplate; context: { value: importRelations(), setting: 'importRelations', label: 'Import relations' }"></ng-container>
        <ng-container *ngTemplateOutlet="importSettingTemplate; context: { value: importExercises(), setting: 'importExercises', label: 'Import exercises' }"></ng-container>
        <ng-container *ngTemplateOutlet="importSettingTemplate; context: { value: importLectures(), setting: 'importLectures', label: 'Import lectures' }"></ng-container>
    </div>
    <hr class="my-3" />
    <div class="row m-0">
        <div class="col p-0 pe-2">
            <div class="d-flex align-items-center">
                <label for="dateTypes">Reference date</label>
                <fa-icon [icon]="faQuestionCircle" size="sm" class="ms-1 text-secondary" />
            </div>
            <div class="d-flex">
                <input
                    class="form-control position-relative ps-5"
                    id="date-input-field"
                    [value]="referenceDate()"
                    [owlDateTime]="dt"
                    (dateTimeChange)="setReferenceDate($event)"
                    name="datePicker"
                />
                <button [owlDateTimeTrigger]="dt" class="btn position-absolute" type="button">
                    <fa-icon [icon]="faCalendarAlt" />
                </button>
                <div class="position-relative">
                    <button class="btn position-absolute" type="button" style="right: 0" (click)="setReferenceDate(undefined)">
                        <fa-icon [icon]="faCircleXmark" [class.text-secondary]="!referenceDate()" />
                    </button>
                </div>
                <owl-date-time #dt />
            </div>
        </div>
        <div class="col p-0 ps-2 align-items-center">
            <div class="d-flex align-items-center">
                <label for="dateTypes">Date type</label>
                <fa-icon [icon]="faQuestionCircle" size="sm" class="ms-1 text-secondary" />
            </div>
            <select
                [required]="referenceDate()"
                [disabled]="!referenceDate()"
                [value]="isReleaseDate()"
                (change)="setReferenceDateType($event)"
                id="dateTypes"
                name="dateTypes"
                class="form-select"
            >
                <option disabled [selected]="isReleaseDate() === undefined">-- select an option --</option>
                <option value="true">Release date</option>
                <option value="false">Due date</option>
            </select>
        </div>
    </div>
</div>

<ng-template #importSettingTemplate let-value="value" let-setting="setting" let-label="label">
    <div (click)="toggleImportSetting(setting)" class="col p-0 d-flex align-items-center clickable">
        <input [id]="setting + '-checkbox'" type="checkbox" [checked]="value" />
        <label class="ms-2">{{ label }}</label>
        <fa-icon [icon]="faQuestionCircle" size="sm" class="ms-1 text-secondary" />
    </div>
</ng-template>
