<div class="row">
    <div class="col-12 mb-2">
        <div class="alert alert-info">
            {{ 'artemisApp.generic.timeZone' | artemisTranslate: { timeZone } }}
        </div>
    </div>
    <!-- Todo: ButtonRadio timeframe selector -->
    <div class="col-12">
        <form class="row" *ngIf="form" [formGroup]="form" (ngSubmit)="submitForm()">
            <div class="btn-group" role="group">
                <input type="radio" class="btn-check" name="timeFrame" id="FreePeriod" autocomplete="off" (click)="setTimeFrame(TimeFrame.Period)" />
                <label class="btn btn-outline-primary" for="FreePeriod">Free Period</label>

                <input type="radio" class="btn-check" name="timeFrame" id="FreeDay" autocomplete="off" checked (click)="setTimeFrame(TimeFrame.Day)" />
                <label class="btn btn-outline-primary" for="FreeDay">Free Day</label>

                <input type="radio" class="btn-check" name="timeFrame" id="FreePeriodWithinDay" autocomplete="off" (click)="setTimeFrame(TimeFrame.PeriodWithinDay)" />
                <label class="btn btn-outline-primary" for="FreePeriodWithinDay">Free Period within Day</label>
            </div>
            <!-- Date -->
            <!--            Todo: display correct labels for different timeframes-->
            <div *ngIf="timeFrame != TimeFrame.Period">
                <label class="form-label" for="startDate">{{ 'artemisApp.forms.tutorialFreePeriodForm.dateInput.label' | artemisTranslate }}</label>
            </div>
            <div *ngIf="timeFrame == TimeFrame.Period">
                <label class="form-label" for="startDate">{{ 'artemisApp.forms.tutorialFreePeriodForm.dateInput.labelStart' | artemisTranslate }}</label>
            </div>

            <div class="input-group">
                <input formControlName="startDate" required [owlDateTime]="startDate" class="d-none" />
                <input
                    name="startDate"
                    id="startDate"
                    required
                    [class.is-invalid]="isStartDateInvalid"
                    (focus)="markStartDateAsTouched()"
                    [value]="startDateControl?.value | artemisDate: 'long-date' : false : undefined : true"
                    [owlDateTimeTrigger]="startDate"
                    readonly
                    class="form-control"
                />
                <button type="button" class="btn btn-secondary" [owlDateTimeTrigger]="startDate">
                    <fa-icon [icon]="faCalendarAlt"></fa-icon>
                </button>
                <owl-date-time [firstDayOfWeek]="1" [pickerType]="'calendar'" #startDate [pickerMode]="'dialog'"></owl-date-time>
            </div>
            <div *ngIf="startDateControl?.invalid && (startDateControl?.dirty || startDateControl?.touched)" class="alert alert-danger">
                <div *ngIf="startDateControl?.errors?.required">
                    {{ 'artemisApp.forms.tutorialFreePeriodForm.dateInput.requiredDateError' | artemisTranslate }}
                </div>
            </div>

            <!--            Todo: EndDate selector and lables. Where is the endDate saved before submitting the form?-->
            <div *ngIf="getTimeFrame() == TimeFrame.Period">
                <label class="form-label" for="endDate">{{ 'artemisApp.forms.tutorialFreePeriodForm.dateInput.labelEnd' | artemisTranslate }}</label>
                <div class="input-group">
                    <input formControlName="endDate" required [owlDateTime]="endDate" class="d-none" />
                    <input
                        name="endDate"
                        id="endDate"
                        required
                        [class.is-invalid]="isEndDateInvalid"
                        (focus)="markEndDateAsTouched()"
                        [value]="endDateControl?.value | artemisDate: 'long-date' : false : undefined : true"
                        [owlDateTimeTrigger]="endDate"
                        readonly
                        class="form-control"
                    />
                    <button type="button" class="btn btn-secondary" [owlDateTimeTrigger]="endDate">
                        <fa-icon [icon]="faCalendarAlt"></fa-icon>
                    </button>
                    <owl-date-time [firstDayOfWeek]="1" [pickerType]="'calendar'" #endDate [pickerMode]="'dialog'"></owl-date-time>
                </div>
                <div *ngIf="endDateControl?.invalid && (endDateControl?.dirty || endDateControl?.touched)" class="alert alert-danger">
                    <div *ngIf="endDateControl?.errors?.required">
                        {{ 'artemisApp.forms.tutorialFreePeriodForm.dateInput.requiredDateError' | artemisTranslate }}
                    </div>
                </div>
            </div>

            <!--            Todo: Hour selector for PeriodWithinDay-->
            <div *ngIf="getTimeFrame() == TimeFrame.PeriodWithinDay">
                <label class="form-label" for="startTime">{{ 'artemisApp.forms.tutorialFreePeriodForm.dateInput.labelStart' | artemisTranslate }}</label>
                <div class="input-group">
                    <input name="startTime" id="startTime" required [owlDateTimeTrigger]="dt2" [owlDateTime]="dt2" />
                    <owl-date-time [pickerType]="'timer'" #dt2></owl-date-time>
                    <!--                <label class="form-label" for="endTime">{{ 'artemisApp.forms.tutorialFreePeriodForm.dateInput.labelStart' | artemisTranslate }}</label>-->
                </div>
            </div>

            <!-- Reason -->
            <div class="form-group">
                <label for="reason">{{ 'artemisApp.forms.tutorialFreePeriodForm.reasonInput.label' | artemisTranslate }}</label>
                <textarea
                    class="form-control"
                    id="reason"
                    rows="6"
                    formControlName="reason"
                    [placeholder]="'artemisApp.forms.tutorialFreePeriodForm.reasonInput.placeholder' | artemisTranslate"
                ></textarea>
                <div *ngIf="reasonControl?.invalid && (reasonControl?.dirty || reasonControl?.touched)" class="alert alert-danger">
                    <div *ngIf="reasonControl?.errors?.maxlength">
                        {{ 'artemisApp.forms.tutorialFreePeriodForm.reasonInput.maxLengthValidationError' | artemisTranslate: { max: '256' } }}
                    </div>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-12">
                    <button id="submitButton" class="btn btn-primary" type="submit" [disabled]="!isSubmitPossible">
                        <span>{{ (isEditMode ? 'global.generic.edit' : 'global.generic.create') | artemisTranslate }}</span>
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
