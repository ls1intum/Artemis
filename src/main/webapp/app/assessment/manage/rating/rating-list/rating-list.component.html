<div class="col-12">
    <div class="row table-responsive">
        <div [hidden]="ratings.length !== 0">
            <span>{{ 'artemisApp.ratingList.noRatingToShow' | translate }}</span>
        </div>
        <table class="table" [hidden]="ratings.length === 0">
            <thead>
                <tr jhiSort [(predicate)]="ratingsSortingPredicate" [(ascending)]="ratingsReverseOrder" (sortChange)="sortRows()">
                    <th jhiSortBy="id">
                        <a class="th-link">#</a>
                        <fa-icon [icon]="faSort" />
                    </th>
                    <th jhiSortBy="exerciseTitle">
                        <a class="th-link">{{ 'artemisApp.ratingList.exercise' | translate }}</a>
                        <fa-icon [icon]="faSort" />
                    </th>
                    <th jhiSortBy="exerciseType">
                        <a class="th-link">{{ 'artemisApp.ratingList.exerciseType' | translate }}</a>
                        <fa-icon [icon]="faSort" />
                    </th>
                    <th jhiSortBy="assessorLogin">
                        <a class="th-link">{{ 'artemisApp.complaint.listOfComplaints.assessorLogin' | translate }}</a>
                        <fa-icon [icon]="faSort" />
                    </th>
                    <th jhiSortBy="assessorName">
                        <a class="th-link">{{ 'artemisApp.complaint.listOfComplaints.assessorName' | translate }}</a>
                        <fa-icon [icon]="faSort" />
                    </th>
                    <th jhiSortBy="assessmentType">
                        <a class="th-link">{{ 'artemisApp.ratingList.assessmentType' | translate }}</a>
                        <fa-icon [icon]="faSort" />
                    </th>
                    <th jhiSortBy="rating">
                        <a class="th-link">{{ 'artemisApp.ratingList.rating' | translate }}</a>
                        <fa-icon [icon]="faSort" />
                    </th>
                    <th class="text-center">{{ 'artemisApp.ratingList.actions' | translate }}</th>
                </tr>
            </thead>
            <tbody>
                @for (rating of ratings; track rating.id) {
                    <tr>
                        <td>
                            {{ rating.id }}
                        </td>
                        <td>
                            <span>{{ rating.exerciseTitle }}</span>
                        </td>
                        <td>
                            <fa-icon [icon]="getExerciseIcon(rating.exerciseType)" [ngbTooltip]="getExerciseTypeTooltip(rating.exerciseType) | translate" container="body" />
                        </td>
                        <td>
                            <span>{{ rating.assessorLogin ?? '-' }}</span>
                        </td>
                        <td>
                            <span>{{ rating.assessorName ?? '-' }}</span>
                        </td>
                        <td>
                            <span>{{ getAssessmentTypeTranslationKey(rating.assessmentType) | translate }}</span>
                        </td>
                        <td>
                            <span><star-rating checkedColor="gold" uncheckedColor="grey" [value]="rating.rating || 0" size="24" [readOnly]="true" [totalStars]="5" /></span>
                        </td>
                        <td class="text-center">
                            <!-- TODO: also support navigating into Athena assessments in the future -->
                            @if (rating.assessmentType !== AssessmentType.AUTOMATIC_ATHENA) {
                                <button class="btn btn-primary btn-sm" (click)="openResult(rating)">
                                    <fa-icon [icon]="faFolderOpen" [fixedWidth]="true" />
                                    <span>{{ 'artemisApp.ratingList.openSubmission' | translate }}</span>
                                </button>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        @if (totalElements > pageSize) {
            <div class="d-flex justify-content-center mt-3">
                <ngb-pagination
                    [collectionSize]="totalElements"
                    [(page)]="page"
                    [pageSize]="pageSize"
                    [maxSize]="5"
                    [rotate]="true"
                    [boundaryLinks]="true"
                    (pageChange)="onPageChange()"
                />
            </div>
        }
    </div>
</div>
