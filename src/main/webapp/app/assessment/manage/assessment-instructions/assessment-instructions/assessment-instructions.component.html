@let gradingCriteriaValue = this.gradingCriteria();
@let gradingInstructionsValue = this.gradingInstructions();
@if (showAssessmentInstructions() && (gradingInstructionsValue || (gradingCriteriaValue && gradingCriteriaValue.length > 0))) {
    <div class="border p-2">
        @if (gradingInstructionsValue) {
            <jhi-expandable-section headerKey="artemisApp.assessmentInstructions.assessmentInstructions">
                <p class="markdown-preview" [innerHTML]="gradingInstructionsValue"></p>
            </jhi-expandable-section>
        }
        @if (gradingCriteriaValue && gradingCriteriaValue.length > 0) {
            <jhi-expandable-section headerKey="artemisApp.assessmentInstructions.structuredGradingInstructions">
                <jhi-structured-grading-instructions-assessment-layout [readonly]="readOnly()" [criteria]="gradingCriteriaValue" />
            </jhi-expandable-section>
        }
    </div>
}

<h3>{{ exercise().title }}</h3>
<jhi-expandable-section headerKey="artemisApp.assessmentInstructions.problemStatement">
    @switch (exercise().type) {
        @case (ExerciseType.PROGRAMMING) {
            @let programmingParticipationValue = this.programmingParticipation();
            @let programmingExerciseValue = this.programmingExercise();
            <jhi-programming-exercise-instructions
                [exercise]="programmingExerciseValue!"
                [participation]="programmingParticipationValue ? programmingParticipationValue : programmingExerciseValue!.templateParticipation!"
                [personalParticipation]="false"
            />
        }
        @default {
            <p class="markdown-preview" [innerHTML]="problemStatement()"></p>
        }
    }
</jhi-expandable-section>
<jhi-expandable-section headerKey="artemisApp.assessmentInstructions.sampleSolution">
    @switch (exercise().type) {
        @case (ExerciseType.PROGRAMMING) {
            @let programmingExerciseValue = this.programmingExercise();
            <div class="mb-3">
                <a jhiSecureLink [href]="programmingExerciseValue?.solutionParticipation?.repositoryUri">
                    <jhi-button jhiTranslate="artemisApp.exerciseAssessmentDashboard.programmingExercise.exampleSolution" />
                </a>
            </div>
        }
        @default {
            @let sampleSolutionModelValue = this.sampleSolutionModel();
            @let sampleSolutionExplanationValue = this.sampleSolutionExplanation();
            @if (sampleSolutionModelValue) {
                <jhi-modeling-editor [readOnly]="true" [diagramType]="sampleSolutionDiagramType()!" [umlModel]="sampleSolutionModelValue!" />
            }
            @if (sampleSolutionExplanationValue) {
                <p class="markdown-preview" [innerHTML]="sampleSolutionExplanationValue!"></p>
            }
        }
    }
</jhi-expandable-section>
@if (isAssessmentTraining()) {
    <jhi-expandable-section headerKey="artemisApp.assessmentInstructions.trainingEvaluationCriteria.title">
        <p jhiTranslate="artemisApp.assessmentInstructions.trainingEvaluationCriteria.description"></p>
    </jhi-expandable-section>
}
