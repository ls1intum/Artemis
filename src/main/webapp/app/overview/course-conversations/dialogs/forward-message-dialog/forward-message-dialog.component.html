<div class="modal-header">
    <h4 class="modal-title">Forward this message</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="activeModal.dismiss()"></button>
</div>
<div class="modal-body">
    <div class="tag-input-container" (click)="focusInput()">
        <div class="selected-tags">
            <span class="badge bg-primary me-1" *ngFor="let channel of selectedChannels">
                {{ channel.name }}
                <button type="button" class="btn-close btn-close-white btn-sm ms-1" aria-label="Remove" (click)="removeSelectedChannel(channel)"></button>
            </span>
            <span class="badge bg-secondary me-1" *ngFor="let chat of selectedChats">
                {{ chat.otherUserName }}
                <button type="button" class="btn-close btn-close-white btn-sm ms-1" aria-label="Remove" (click)="removeSelectedChat(chat)"></button>
            </span>
            <input
                #searchInput
                type="text"
                class="tag-input"
                [placeholder]="shouldShowPlaceholder ? 'Search channels or names' : ''"
                (input)="filterItems($event)"
                [(ngModel)]="searchTerm"
                (focus)="onInputFocus()"
                (blur)="onInputBlur()"
            />
        </div>
    </div>

    <h5>Channels</h5>
    <ul class="list-group mb-3" style="max-height: 200px; overflow-y: auto">
        <li
            *ngFor="let channel of filteredChannels"
            class="list-group-item d-flex align-items-center"
            [class.active]="isChannelSelected(channel)"
            (click)="toggleChannelSelection(channel)"
            style="cursor: pointer"
        >
            <input type="checkbox" [checked]="isChannelSelected(channel)" (click)="$event.stopPropagation(); toggleChannelSelection(channel)" class="me-2" />
            {{ channel.name }}
        </li>
    </ul>

    <h5>Chats</h5>
    <ul class="list-group" style="max-height: 200px; overflow-y: auto">
        <li
            *ngFor="let chat of filteredChats"
            class="list-group-item d-flex align-items-center"
            [class.active]="isChatSelected(chat)"
            (click)="toggleChatSelection(chat)"
            style="cursor: pointer"
        >
            <input type="checkbox" [checked]="isChatSelected(chat)" (click)="$event.stopPropagation(); toggleChatSelection(chat)" class="me-2" />
            {{ chat.otherUserName }}
        </li>
    </ul>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-primary" [disabled]="!hasSelections()" (click)="send()">Send</button>
</div>
