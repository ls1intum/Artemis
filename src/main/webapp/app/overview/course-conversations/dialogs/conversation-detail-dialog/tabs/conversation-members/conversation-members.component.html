<div *ngIf="course && activeConversation" class="container-fluid">
    <div class="row">
        <div class="col-auto">
            <button type="button" class="btn btn-outline-secondary" (click)="openAddUsersDialog($event)" *ngIf="canAddUsersToConversation(activeConversation)">
                <fa-icon [icon]="faUserPlus"></fa-icon>
                {{ 'artemisApp.messages.conversationDetail.memberTab.addUsers' | artemisTranslate }}
            </button>
        </div>
    </div>
    <div class="row mt-2">
        <div class="col-8">
            <div class="input-group">
                <span class="input-group-text">
                    <fa-icon [icon]="faMagnifyingGlass" size="xs"></fa-icon>
                </span>
                <input
                    (input)="onSearchQueryInput($event)"
                    [placeholder]="'artemisApp.messages.conversationDetail.memberTab.findMembers' | artemisTranslate"
                    class="form-control"
                    id="searchQuery"
                    type="text"
                />
            </div>
        </div>
        <div class="col-4">
            <div class="input-group">
                <label class="input-group-text" for="searchFilter">Filter</label>
                <select (ngModelChange)="onFilterChange($event)" [ngModel]="selectedFilter" class="form-select form-select" id="searchFilter">
                    <option [value]="ALL">{{ 'artemisApp.messages.conversation.allFilter' | artemisTranslate }}</option>
                    <option [value]="INSTRUCTOR_FILTER_OPTION">{{ 'artemisApp.messages.conversation.instructorFilter' | artemisTranslate }}</option>
                    <option [value]="EDITOR_FILTER_OPTION">{{ 'artemisApp.messages.conversation.editorFilter' | artemisTranslate }}</option>
                    <option [value]="TUTOR_FILTER_OPTION">{{ 'artemisApp.messages.conversation.tutorFilter' | artemisTranslate }}</option>
                    <option [value]="STUDENT_FILTER_OPTION">{{ 'artemisApp.messages.conversation.studentFilter' | artemisTranslate }}</option>
                    <option *ngIf="isChannel(activeConversation)" [value]="CHANNEL_ADMIN_FILTER_OPTION">
                        {{ 'artemisApp.messages.conversation.channelAdminFilter' | artemisTranslate }}
                    </option>
                </select>
            </div>
        </div>
        <div *ngIf="isSearching" class="col-12">
            <small class="form-text text-muted d-inline-block">{{ 'artemisApp.messages.conversationDetail.memberTab.searching' | artemisTranslate }}</small>
        </div>
    </div>
    <div class="row mt-2" *ngIf="members && members.length > 0">
        <div class="col-12">
            <ul class="list-group">
                <li
                    *ngFor="let user of members; let i = index; trackBy: trackIdentity"
                    class="list-group-item"
                    jhi-conversation-member-row
                    [user]="user"
                    [activeConversation]="activeConversation"
                    [course]="course"
                    (userRemoved)="onChangePerformed()"
                ></li>
            </ul>
        </div>
        <div class="col-12">
            <div class="d-flex justify-content-center">
                <jhi-item-count [params]="{ page: page, totalItems: totalItems, itemsPerPage: itemsPerPage }"></jhi-item-count>
            </div>
            <div class="d-flex justify-content-center">
                <ngb-pagination
                    [collectionSize]="totalItems"
                    [(page)]="page"
                    [pageSize]="itemsPerPage"
                    [maxSize]="5"
                    [rotate]="true"
                    [boundaryLinks]="true"
                    (pageChange)="transition()"
                ></ngb-pagination>
            </div>
        </div>
    </div>
</div>
