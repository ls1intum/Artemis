<div class="build-jobs-section">
    @if (buildJobs()?.length) {
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th class="build-jobs-column-tiny"></th>
                        <th class="build-jobs-column-strings" jhiTranslate="artemisApp.buildQueue.buildJob.name"></th>
                        <th class="build-jobs-column" jhiTranslate="artemisApp.buildQueue.buildJob.submitted"></th>
                        <th class="build-jobs-column" jhiTranslate="artemisApp.buildQueue.buildJob.waitingTime"></th>
                        @if (showCourseId()) {
                            <th class="build-jobs-column" jhiTranslate="artemisApp.buildQueue.buildJob.courseId"></th>
                        }
                        <th class="build-jobs-column">
                            <span jhiTranslate="artemisApp.buildQueue.buildJob.priority"></span>
                            <jhi-help-icon text="artemisApp.buildQueue.buildJob.priorityTooltip" />
                        </th>
                        <th class="build-jobs-column-tiny"></th>
                    </tr>
                </thead>
                <tbody>
                    @for (buildJob of buildJobs(); track buildJob.id) {
                        <tr class="clickable-row" (click)="onJobClick(buildJob.id)">
                            <td class="build-jobs-column-tiny">
                                <span class="text-secondary">
                                    <fa-icon [icon]="faClock" />
                                </span>
                            </td>
                            <td class="build-jobs-column-strings">
                                <span [title]="buildJob.name ?? ''"> {{ buildJob.name ?? '' | slice: 0 : 30 }}{{ (buildJob.name ?? '').length > 30 ? '...' : '' }} </span>
                            </td>
                            <td class="build-jobs-column">
                                <span class="text-muted small">{{ buildJob.jobTimingInfo?.submissionDate | artemisDate: 'short' : true }}</span>
                            </td>
                            <td class="build-jobs-column">
                                <span class="text-muted">{{ calculateWaitingTime(buildJob.jobTimingInfo?.submissionDate) }}</span>
                            </td>
                            @if (showCourseId()) {
                                <td class="build-jobs-column">
                                    <a [routerLink]="['/course-management', buildJob.courseId]" (click)="onLinkClick($event)">{{ buildJob.courseId }}</a>
                                </td>
                            }
                            <td class="build-jobs-column">
                                {{ buildJob.priority }}
                            </td>
                            <td class="build-jobs-column-tiny">
                                <button class="btn btn-danger btn-sm" (click)="onCancelJob(buildJob.id!, $event)" [title]="'artemisApp.buildQueue.cancel' | artemisTranslate">
                                    <fa-icon [icon]="faTimes" />
                                </button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    } @else {
        <p class="text-muted" jhiTranslate="artemisApp.buildQueue.noQueuedBuilds"></p>
    }
</div>
