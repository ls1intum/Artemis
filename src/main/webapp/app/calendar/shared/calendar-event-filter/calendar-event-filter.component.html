<div class="multi-select">
    <div class="selected-chips">
        @for (option of includedOptions(); track option) {
            <div class="chip" [attr.data-testid]="'chip-' + option">
                <div class="legend-circle" [class]="getColorClassForFilteringOption(option)"></div>
                <span jhiTranslate="{{ getFilterOptionString(option) }}"></span>
                <fa-icon [icon]="faXmark" class="remove-btn" (click)="toggleOption(option)" />
            </div>
        }
    </div>

    <button
        type="button"
        class="btn btn-outline-primary"
        [ngbPopover]="popoverContent"
        popoverClass="filter-popover"
        [autoClose]="'outside'"
        triggers="click"
        placement="bottom-end"
    >
        <span jhiTranslate="artemisApp.calendar.filterButtonLabel"></span>
        <fa-icon [icon]="faChevronDown" />
    </button>

    <ng-template #popoverContent>
        <div class="dropdown">
            @for (option of options; track option) {
                <div class="form-check dropdown-item">
                    <input class="form-check-input" type="checkbox" id="filter-{{ option }}" [checked]="includedOptions().includes(option)" (change)="toggleOption(option)" />
                    <label class="form-check-label" for="filter-{{ option }}" jhiTranslate="{{ getFilterOptionString(option) }}"></label>
                </div>
            }
        </div>
    </ng-template>
</div>
