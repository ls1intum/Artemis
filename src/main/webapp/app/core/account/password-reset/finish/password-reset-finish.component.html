<div class="row justify-content-center">
    <div class="col-md-4">
        <h1 jhiTranslate="reset.finish.title"></h1>
        @if (initialized() && !key()) {
            <div class="alert alert-danger" jhiTranslate="reset.finish.messages.keymissing">
                <strong>The password reset key is missing.</strong>
            </div>
        }
        @if (key() && !success()) {
            <div class="alert alert-warning">
                <span jhiTranslate="reset.finish.messages.info"></span>
            </div>
        }
        @if (error()) {
            <div class="alert alert-danger">
                <span jhiTranslate="reset.finish.messages.error"></span>
            </div>
        }
        @if (success()) {
            <div class="alert alert-success">
                <span jhiTranslate="reset.finish.messages.success"></span>
                <a class="alert-link" [routerLink]="['/']" jhiTranslate="reset.finish.messages.success-part2"></a>
            </div>
        }
        @if (doNotMatch()) {
            <div class="alert alert-danger" jhiTranslate="global.messages.error.dontmatch"></div>
        }
        @if (key() && !success()) {
            <div>
                <form name="form" role="form" (ngSubmit)="finishReset()" [formGroup]="passwordForm">
                    <div class="form-group">
                        <label class="form-control-label" for="newPassword" jhiTranslate="global.form.newpassword"></label>
                        <input
                            type="password"
                            class="form-control"
                            id="newPassword"
                            name="newPassword"
                            placeholder="{{ 'global.form.newpassword.placeholder' | artemisTranslate }}"
                            formControlName="newPassword"
                            [maxLength]="PASSWORD_MAX_LENGTH"
                            #newPassword
                            required
                        />
                        @if (passwordForm.controls.newPassword.invalid && (passwordForm.controls.newPassword.dirty || passwordForm.controls.newPassword.touched)) {
                            <div>
                                @if (passwordForm.controls.newPassword.errors?.required) {
                                    <small class="form-text text-danger" jhiTranslate="global.messages.validate.newpassword.required"></small>
                                }
                                @if (passwordForm.controls.newPassword.errors?.minlength) {
                                    <small
                                        class="form-text text-danger"
                                        jhiTranslate="global.messages.validate.newpassword.minlength"
                                        [translateValues]="{ min: PASSWORD_MIN_LENGTH }"
                                    ></small>
                                }
                                @if (passwordForm.controls.newPassword.errors?.maxlength) {
                                    <small
                                        class="form-text text-danger"
                                        jhiTranslate="global.messages.validate.newpassword.maxlength"
                                        [translateValues]="{ max: PASSWORD_MAX_LENGTH }"
                                    ></small>
                                }
                            </div>
                        }
                        <jhi-password-strength-bar [passwordToCheck]="passwordForm.controls.newPassword.value" />
                    </div>
                    <div class="form-group">
                        <label class="form-control-label" for="confirmPassword" jhiTranslate="global.form.confirmpassword"></label>
                        <input
                            type="password"
                            class="form-control"
                            id="confirmPassword"
                            name="confirmPassword"
                            placeholder="{{ 'global.form.confirmpassword.placeholder' | artemisTranslate }}"
                            formControlName="confirmPassword"
                            required
                        />
                        @if (passwordForm.controls.confirmPassword.invalid && (passwordForm.controls.confirmPassword.dirty || passwordForm.controls.confirmPassword.touched)) {
                            <div>
                                @if (passwordForm.controls.confirmPassword.errors?.required) {
                                    <small class="form-text text-danger" jhiTranslate="global.messages.validate.confirmpassword.required"></small>
                                }
                                @if (passwordForm.controls.confirmPassword.errors?.minlength) {
                                    <small
                                        class="form-text text-danger"
                                        jhiTranslate="global.messages.validate.confirmpassword.minlength"
                                        [translateValues]="{ min: PASSWORD_MIN_LENGTH }"
                                    ></small>
                                }
                                @if (passwordForm.controls.confirmPassword.errors?.maxlength) {
                                    <small
                                        class="form-text text-danger"
                                        jhiTranslate="global.messages.validate.confirmpassword.maxlength"
                                        [translateValues]="{ max: PASSWORD_MAX_LENGTH }"
                                    ></small>
                                }
                            </div>
                        }
                    </div>
                    <button type="submit" [disabled]="passwordForm.invalid" class="btn btn-primary" jhiTranslate="reset.finish.form.button"></button>
                </form>
            </div>
        }
    </div>
</div>
