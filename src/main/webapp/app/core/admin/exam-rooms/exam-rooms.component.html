<div>
    <div class="upload-container">
        <h2>Upload Room Data</h2>
        <input type="file" class="btn-default" (change)="onFileSelected($event)" accept=".zip" />
        <button class="upload-btn" (click)="upload()" [disabled]="!canUpload()">Upload</button>
        <br /><br />
        <button (click)="clearExamRooms()" class="btn-danger error">Clear All Exam Rooms</button>
        <button (click)="deleteOutdatedAndUnusedExamRooms()" class="btn-default error">Safe delete</button>

        @if (isUploading()) {
            <div class="info">Uploading...</div>
        }
        @if (hasUploadFailed()) {
            <div class="error">Upload failed.</div>
        }
        @if (hasUploadSucceeded()) {
            <div class="success">Upload successful!</div>
        }
        @if (uploadInformation()) {
            <div class="upload-info card">
                <h3>Upload Summary</h3>
                <ul>
                    <li><strong>File:</strong> {{ uploadInformation()?.uploadedFileName }}</li>
                    <li><strong>Duration:</strong> {{ uploadInformation()?.uploadDuration }}</li>
                    <li><strong>Rooms Uploaded:</strong> {{ uploadInformation()?.numberOfUploadedRooms }}</li>
                    <li><strong>Seats Uploaded:</strong> {{ uploadInformation()?.numberOfUploadedSeats }}</li>
                    <!--                    <li>-->
                    <!--                        <strong>Room Names:</strong>-->
                    <!--                        <ol>-->
                    <!--                            @for (name of uploadInformation()?.uploadedRoomNames; track name) {-->
                    <!--                                <li>{{ name }}</li>-->
                    <!--                            }-->
                    <!--                        </ol>-->
                    <!--                    </li>-->
                </ul>
            </div>
        }
        @if (deletionSummary()) {
            <div class="card">
                <h3>Deletion Summary</h3>
                <ul>
                    <li><strong>Duration:</strong> {{ deletionSummary()?.deleteDuration }}</li>
                    <li><strong>Rooms Deleted:</strong> {{ deletionSummary()?.numberOfDeletedExamRooms }}</li>
                </ul>
            </div>
        }
    </div>
    <br />
    <div class="info">
        @if (overview()) {
            <h3>Exam Room Overview</h3>
            <p>Rooms: {{ overview()?.numberOfStoredExamRooms }}</p>
            <p>Seats: {{ overview()?.numberOfStoredExamSeats }}</p>
            <p>Layout Strategies: {{ overview()?.numberOfStoredLayoutStrategies }}</p>
            <p>Unique rooms: {{ overview()?.numberOfUniqueExamRooms }}</p>
            <p>Unique seats: {{ overview()?.numberOfUniqueExamSeats }}</p>
            <p>Unique layout strategies: {{ overview()?.numberOfUniqueLayoutStrategies }}</p>
            <p>Distinct Layout Names: {{ overview()?.distinctLayoutStrategyNames?.join(', ') }}</p>

            <h4>Exam Rooms</h4>
            <ul>
                @for (room of overview()?.examRoomDTOS; track room) {
                    <li>
                        {{ room.name }} ({{ room.roomNumber }}) - {{ room.numberOfSeats }} seats
                        <ul>
                            @for (strategy of room.layoutStrategies; track strategy) {
                                <li>{{ strategy.name }}, Type: {{ strategy.type }}, Capacity: {{ strategy.capacity ?? 'N/A' }}</li>
                            }
                        </ul>
                    </li>
                }
            </ul>
        } @else {
            <p>Error with displaying the overview</p>
        }
    </div>
</div>
