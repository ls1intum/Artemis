<div class="sidebar-container d-flex h-100 justify-content-between flex-column" [ngClass]="{ collapsed: isNavbarCollapsed() }">
    <div class="sidebar-content">
        <!-- Admin Header -->
        <div id="admin-header" class="d-flex p-3 align-items-center text-decoration-none">
            <div class="admin-icon d-flex align-items-center justify-content-center">
                <fa-icon [icon]="faUserShield" />
            </div>
            @if (!isNavbarCollapsed()) {
                <div class="admin-title h6 mb-0 fw-bold text-body auto-collapse" jhiTranslate="global.menu.admin.main"></div>
            }
        </div>

        <!-- NavItems grouped -->
        <div>
            <hr class="mt-0" />
            <ul class="navbar-nav justify-content-end flex-grow-1 text-decoration-none">
                @for (group of sidebarGroups(); track group.translation; let groupIndex = $index) {
                    <!-- Group Header -->
                    @if (!isNavbarCollapsed()) {
                        <li class="nav-group-header">
                            <span class="group-label text-muted text-uppercase small px-3" [jhiTranslate]="group.translation"></span>
                        </li>
                    } @else if (groupIndex > 0) {
                        <li class="nav-group-separator">
                            <hr class="my-2 mx-2" />
                        </li>
                    }

                    <!-- Group Items -->
                    @for (item of group.items; track item.routerLink) {
                        <li class="nav-item">
                            <a
                                class="nav-link nav-link-sidebar px-3 py-2"
                                [attr.id]="item.testId"
                                [ngClass]="{ collapsed: isNavbarCollapsed() }"
                                [routerLink]="item.routerLink"
                                routerLinkActive="active"
                                [title]="item.title"
                            >
                                <fa-icon [fixedWidth]="true" [icon]="item.icon" class="ms-2 me-3" />
                                @if (!isNavbarCollapsed()) {
                                    <span class="auto-collapse" [jhiTranslate]="item.translation"></span>
                                }
                            </a>
                        </li>
                    }
                }
            </ul>
        </div>
    </div>

    <!-- Bottom section with collapse toggle -->
    <div class="navbar-nav mb-2 collapse-toggle-container">
        @if (!isNavbarCollapsed() && canExpand()) {
            <button
                type="button"
                class="double-arrow px-2"
                [ngClass]="{ 'menu-closed': isNavbarCollapsed() }"
                [ngbTooltip]="'global.menu.admin.collapseMenu' | artemisTranslate"
                tooltipClass="double-arrow-tooltip"
                [container]="'body'"
                (click)="toggleCollapseState.emit()"
                [attr.aria-expanded]="!isNavbarCollapsed()"
            >
                <span class="double-arrow-icon">
                    <fa-icon class="me-negative fa-xs" [icon]="faChevronRight" />
                    <fa-icon class="fa-xs" [icon]="faChevronRight" />
                </span>
            </button>
        }

        @if (isNavbarCollapsed() && canExpand()) {
            <button
                type="button"
                class="double-arrow mb-2"
                [ngClass]="{ 'menu-closed': isNavbarCollapsed() }"
                tooltipClass="double-arrow-tooltip-collapsed"
                [ngbTooltip]="'global.menu.admin.expandMenu' | artemisTranslate"
                (click)="toggleCollapseState.emit()"
                [attr.aria-expanded]="!isNavbarCollapsed()"
            >
                <span class="double-arrow-icon">
                    <fa-icon class="me-negative fa-xs" [icon]="faChevronRight" />
                    <fa-icon class="fa-xs" [icon]="faChevronRight" />
                </span>
            </button>
        }
    </div>
</div>
