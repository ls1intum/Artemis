<p-dialog
    [(visible)]="visible"
    [modal]="true"
    [closable]="true"
    [closeOnEscape]="false"
    [dismissableMask]="false"
    [draggable]="false"
    [appendTo]="'body'"
    [style]="{ width: '50dvw' }"
    [header]="'cleanupService.operation.' + operation().name | artemisTranslate"
>
    @if (operation().name === 'deleteOrphans') {
        <p
            [jhiTranslate]="'cleanupService.execute.questionWithoutDates'"
            [translateValues]="{
                operationName: 'cleanupService.operation.' + operation().name | artemisTranslate,
            }"
        ></p>
    } @else {
        <p
            [jhiTranslate]="'cleanupService.execute.question'"
            [translateValues]="{
                operationName: 'cleanupService.operation.' + operation().name | artemisTranslate,
                deleteFrom: operation().deleteFrom | artemisDate,
                deleteTo: operation().deleteTo | artemisDate,
            }"
        ></p>
    }
    <div>
        <p jhiTranslate="cleanupService.modal.affectedEntities"></p>
        <ul>
            @for (key of cleanupKeys(); track key) {
                <li>
                    <span [jhiTranslate]="'cleanupService.entities.' + key"></span>
                    : {{ counts()[key] }}
                    @if (operationExecuted()) {
                        @if (counts()[key] > 0) {
                            <fa-icon [icon]="faTimes" class="text-danger" />
                        } @else {
                            <fa-icon [icon]="faCheckCircle" class="text-success" />
                        }
                    }
                </li>
            }
        </ul>
        @if (!hasEntriesToDelete()) {
            <p class="text-muted" jhiTranslate="cleanupService.modal.noEntriesToDelete"></p>
        }
    </div>
    <ng-template #footer>
        <button type="button" class="btn btn-secondary" (click)="close()" jhiTranslate="cleanupService.button.close"></button>
        <button type="button" class="btn btn-danger" [disabled]="!hasEntriesToDelete()" (click)="executeCleanupOperation()" jhiTranslate="cleanupService.button.execute"></button>
    </ng-template>
</p-dialog>
