<p-dialog
    [(visible)]="visible"
    [modal]="true"
    [closable]="true"
    [closeOnEscape]="true"
    [dismissableMask]="false"
    [draggable]="false"
    [appendTo]="'body'"
    [style]="{ width: '50dvw' }"
    header=""
>
    <ng-template #header>
        <h4 class="modal-title">
            <span jhiTranslate="artemisApp.dataExport.confirmationHeader"></span>
        </h4>
    </ng-template>
    <form name="dataExportConfirmationForm" (ngSubmit)="confirmDataExportRequest()" #dataExportConfirmationForm="ngForm">
        <p [jhiTranslate]="'artemisApp.dataExport.confirmationQuestion'">Are you sure you want to request?</p>
        @if (adminDialog()) {
            <div>
                @if (adminDialog()) {
                    <div class="checkbox">
                        <div class="control-label form-check">
                            <input
                                id="request-for-other-user"
                                type="checkbox"
                                name="checkbox"
                                class="form-check-input"
                                (change)="onRequestDataExportForOtherUserChanged($event)"
                                [ngModel]="requestForAnotherUser()"
                                (ngModelChange)="requestForAnotherUser.set($event)"
                            />
                            <label for="request-for-other-user" class="form-check-label" jhiTranslate="artemisApp.dataExport.requestForAnotherUser"></label>
                        </div>
                        @if (requestForAnotherUser()) {
                            <jhi-type-ahead-user-search-field [loginOrName]="expectedLogin()" (loginOrNameChange)="onLoginOrNameChange($event)" />
                        }
                    </div>
                }
            </div>
        }
        <jhi-confirm-entity-name
            [entityName]="expectedLogin()"
            [confirmationText]="confirmationTextHint()"
            [disabled]="submitDisabled()"
            [ngModel]="enteredLogin()"
            (ngModelChange)="enteredLogin.set($event)"
            name="confirmEntityName"
        />
    </form>
    <ng-template #footer>
        <button type="button" class="btn btn-secondary" (click)="clear()" [disabled]="submitDisabled()">
            <fa-icon [icon]="faBan" />&nbsp;<span jhiTranslate="entity.action.cancel"></span>
        </button>
        <button
            id="request"
            type="button"
            class="btn btn-primary"
            [style.cursor]="dataExportConfirmationForm.invalid || submitDisabled() ? 'not-allowed' : 'pointer'"
            [disabled]="dataExportConfirmationForm.invalid || submitDisabled()"
            (click)="confirmDataExportRequest()"
        >
            @if (submitDisabled()) {
                <span><fa-icon [icon]="faSpinner" animation="spin" />&nbsp;</span>
            }
            <fa-icon [icon]="faCheck" />&nbsp;
            <span [jhiTranslate]="'artemisApp.dataExport.request'"> Request</span>
        </button>
    </ng-template>
</p-dialog>
