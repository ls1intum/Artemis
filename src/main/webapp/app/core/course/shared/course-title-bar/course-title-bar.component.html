<div
    id="course-title-bar-test"
    class="module-bg m-2 mt-0 px-3 py-2 rounded rounded-3 justify-content-between sticky-top"
    [ngStyle]="{ display: isExamStarted() ? 'none' : 'flex' }"
>
    <div class="align-self-center d-flex">
        @if (hasSidebar()) {
            <button
                [ngbTooltip]="'Toggle Sidebar (⇧ + Ctrl + B)'"
                [ngClass]="{ 'is-collapsed': isSidebarCollapsed(), 'is-communication-module': pageTitle() === 'communication' }"
                triggers="hover"
                class="btn btn-sidebar-collapse me-3 btn-sm rounded-3"
                (click)="toggleSidebar.emit()"
            >
                <fa-icon [fixedWidth]="true" [icon]="facSidebar" class="text-secondary d-flex justify-content-center align-items-center" size="lg" />
                <div class="btn-sidebar-collapse-chevron d-flex gap-1">
                    <fa-icon
                        [fixedWidth]="true"
                        [icon]="faChevronRight"
                        class="text-secondary btn-sidebar-collapse-chevron-start d-flex justify-content-center align-items-center"
                        size="xs"
                    />
                    <fa-icon [fixedWidth]="true" [icon]="faChevronRight" class="text-secondary d-flex justify-content-center align-items-center" size="xs" />
                </div>
            </button>
        }

        <div class="align-self-center">
            <!-- 1) projected title from routed child? 2) fallback -->
            @if (customTitleTpl) {
                <ng-container *ngTemplateOutlet="customTitleTpl" />
            } @else {
                <div class="h5 mb-0" [jhiTranslate]="pageTitle()"></div>
            }
        </div>
    </div>

    <div class="d-flex gap-2 align-items-center">
        <!-- 1) projected actions from routed child? -->
        @if (customActionsTpl) {
            <ng-container *ngTemplateOutlet="customActionsTpl" />
        }

        <!-- keep student‐view button slot if you still use it -->
        <ng-content select="[student-view-button]" />

        <!-- any other generic projected content -->
        <ng-content />
    </div>
</div>
