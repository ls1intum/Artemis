<div class="exam-status-wrapper">
    <!-- 1. Exam preparation -->
    <div class="status-step">
        <!-- If all preparation tasks are finished, show a green check as header, show a red cross else -->
        <div class="d-flex justify-content-center header-icon">
            <fa-icon *ngIf="examPreparationFinished" [icon]="faCheckCircle" class="check"></fa-icon>
            <fa-icon *ngIf="!examPreparationFinished" [icon]="faTimesCircle" class="cross"></fa-icon>
        </div>
        <div class="status-step-content">
            <h6 class="text-center">{{ 'artemisApp.examStatus.preparation.examPreparation' | artemisTranslate }}</h6>
            <ol>
                <li *ngFor="let suffix of translationSuffixes" class="align-items-center">
                    <span>{{ 'artemisApp.examStatus.preparation.' + suffix | artemisTranslate }}:</span>
                    <fa-icon *ngIf="translationToFlagMap.get(suffix)" [icon]="faCheckCircle" class="check"></fa-icon>
                    <fa-icon *ngIf="!translationToFlagMap.get(suffix)" [icon]="faTimes" class="cross"></fa-icon>
                </li>
            </ol>
        </div>
    </div>
    <div class="connector" [ngClass]="examPreparationFinished ? 'check' : 'cross'"></div>

    <!-- 2. Exam conduction -->
    <div class="status-step">
        <!-- If exam conduction is planned, but not started yet, show a green calendar with a check,
             If exam is currently conducted, show a yellow dot
             If exam is finished, show a green check -->
        <div class="d-flex justify-content-center header-icon">
            <fa-icon *ngIf="examConductionState === examConductionAndCorrectionStateEnum.PLANNED" [icon]="faCalendarCheck" class="check"></fa-icon>
            <fa-icon *ngIf="examConductionState === examConductionAndCorrectionStateEnum.RUNNING" [icon]="faDotCircle" class="running"></fa-icon>
            <fa-icon *ngIf="examConductionState === examConductionAndCorrectionStateEnum.FINISHED" [icon]="faCheckCircle" class="check"></fa-icon>
        </div>
        <div class="status-step-content">
            <h6 class="text-center">{{ 'artemisApp.examStatus.conduction.examConduction' | artemisTranslate }}</h6>
            <ol *ngIf="examChecklist">
                <li>
                    <span
                        >{{ 'artemisApp.examStatus.conduction.startedExams' | artemisTranslate }}:
                        {{ examChecklist.numberOfExamsStarted }}
                        ({{ numberOfGeneratedStudentExams > 0 ? (examChecklist.numberOfExamsStarted * 100) / examChecklist.numberOfGeneratedStudentExams! : 0 }}%)</span
                    >
                </li>
                <li>
                    <span
                        >{{ 'artemisApp.examStatus.conduction.submittedExams' | artemisTranslate }}:
                        {{ examChecklist.numberOfExamsSubmitted }}
                        ({{ numberOfGeneratedStudentExams > 0 ? (examChecklist.numberOfExamsSubmitted * 100) / numberOfGeneratedStudentExams! : 0 }}%)</span
                    >
                </li>
            </ol>
        </div>
    </div>
    <div class="connector" [ngClass]="examConductionState === examConductionAndCorrectionStateEnum.FINISHED ? 'check' : ''"></div>
    <!-- 3. Exam correction -->
    <div class="status-step">
        <div class="d-flex justify-content-center header-icon">
            <fa-icon [icon]="faCalendarCheck" class="check"></fa-icon>
        </div>
        <div class="status-step-content">
            <h6 class="text-center">{{ 'artemisApp.examStatus.correction.examCorrection' | artemisTranslate }}</h6>
            <ol *ngIf="examChecklist">
                <div *ngIf="examChecklist.numberOfTotalExamAssessmentsFinishedByCorrectionRound !== null && examChecklist.numberOfExamsSubmitted !== 0">
                    <li *ngFor="let correctionRound of examChecklist.numberOfTotalExamAssessmentsFinishedByCorrectionRound; let i = index">
                        <span>
                            {{ 'artemisApp.examStatus.correction.correctionRoundProgress' | artemisTranslate: { i: this.i } }}: ({{
                                (correctionRound * 100) / examChecklist.numberOfTotalParticipationsForAssessment
                            }}%)
                        </span>
                    </li>
                </div>
                <li>
                    <span>{{ 'artemisApp.examStatus.correction.examReview' | artemisTranslate }}:</span>
                    <b *ngIf="examReviewState" [ngClass]="examReviewState">{{ 'artemisApp.examStatus.correction.' + examReviewState | artemisTranslate }}</b>
                </li>
                <li>
                    <span>
                        {{ 'artemisApp.examStatus.correction.complaints' | artemisTranslate }}:
                        {{
                            examChecklist.numberOfAllComplaintsDone && examChecklist.numberOfAllComplaints
                                ? (examChecklist.numberOfAllComplaintsDone * 100) / examChecklist.numberOfAllComplaints
                                : 0
                        }}%
                    </span>
                </li>
            </ol>
        </div>
    </div>
</div>
