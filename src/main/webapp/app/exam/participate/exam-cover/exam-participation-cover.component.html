@if (exam) {
    @if (isVisible() && !isGracePeriodOver() && !studentExam?.submitted && !examStartConfirmed) {
        <div class="px-3 scrollable-content content-height-dev">
            <div class="w-100 d-flex">
                <div class="col-md-3">
                    <jhi-exam-live-events-button />
                </div>

                <h2 class="col-md-6" style="text-align: center; font-weight: normal">
                    <span>
                        {{ 'artemisApp.examParticipation.greeting' | artemisTranslate: { title: exam.title } }}
                    </span>
                    <br />
                </h2>

                <div class="col-md-3"></div>
            </div>

            <div class="container d-flex flex-column align-items-center justify-content-center">
                <jhi-exam-general-information [exam]="exam" [studentExam]="studentExam" [displayOnExamCover]="true" />

                <div><span style="display: table; margin-left: auto; margin-right: auto" [innerHTML]="formattedGeneralInformation"></span></div>

                <div class="form-check mt-1 ps-0">
                    <input
                        [(ngModel)]="confirmed"
                        type="checkbox"
                        id="confirmBox"
                        (click)="updateConfirmation()"
                        class="form-check-input"
                        [class.ms-0]="!this.exam.confirmationStartText"
                        [required]="inserted"
                        [disabled]="waitingForExamStart"
                    />
                    <label for="confirmBox" id="formatted-confirmation-text" class="form-check-label" [innerHTML]="formattedConfirmationText"></label>
                </div>
                <div style="text-align: center">
                    <div class="login-form">
                        <div class="row justify-content-center">
                            <div class="col-md-6">
                                <label class="font-weight-bold" for="fullname" jhiTranslate="{{ 'artemisApp.exam.startConsentText' }}"></label>
                            </div>
                        </div>
                        <div class="row justify-content-center" style="padding-bottom: 0; margin-bottom: 0">
                            <div class="form-group" style="padding-bottom: 0; margin-bottom: 0; width: unset">
                                <input
                                    size="50"
                                    type="text"
                                    class="form-control"
                                    name="fullname"
                                    id="fullname"
                                    [placeholder]="'artemisApp.examParticipation.namePlaceholder' | artemisTranslate"
                                    [(ngModel)]="enteredName"
                                    [ngModelOptions]="{ updateOn: 'change' }"
                                    [disabled]="waitingForExamStart"
                                />
                            </div>
                        </div>
                        <div class="row justify-content-center">
                            <div id="your-name" class="col-md-6" style="font-weight: lighter">
                                <span> ({{ 'artemisApp.examParticipation.nameDisplay' | artemisTranslate: { fullName: accountName } }}) </span>
                            </div>
                        </div>
                        <div class="row justify-content-center">
                            <div class="form-group" style="width: 60%">
                                @if (!confirmed && inserted) {
                                    <div class="alert alert-danger mt-1">
                                        <span [innerHTML]="'artemisApp.exam.notConfirmed' | artemisTranslate"></span>
                                    </div>
                                }
                                @if (!nameIsCorrect && inserted) {
                                    <div class="alert alert-danger mt-1">
                                        <span [innerHTML]="'artemisApp.exam.falseName' | artemisTranslate"></span>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>

                    <ng-container #startButton>
                        @if (!startButtonEnabled) {
                            <div>{{ 'artemisApp.exam.startExamToolTip' | artemisTranslate }}</div>
                        }
                        <button id="start-exam" [disabled]="!startButtonEnabled || waitingForExamStart" type="submit" (click)="startExam()" class="btn btn-primary">
                            <span jhiTranslate="artemisApp.exam.startExam"></span>
                        </button>
                    </ng-container>
                </div>
                @if (waitingForExamStart) {
                    <div class="exam-waiting-for-start-overlay alert alert-info">
                        <span>{{ 'artemisApp.examParticipation.waitForStart' | artemisTranslate: { title: exam.title } }}</span>
                        @if (exam.startDate) {
                            <div>
                                <hr />
                                <span jhiTranslate="artemisApp.examParticipation.timeUntilPlannedStart"></span>
                                <span class="text-bold">{{ timeUntilStart }}</span>
                                <br />
                                <span>({{ exam.startDate | artemisDate: 'time' }})</span>
                            </div>
                        }
                    </div>
                }
            </div>
        </div>
    }
}
@if (showExamSummary) {
    <jhi-exam-participation-summary [studentExam]="studentExam" />
}
