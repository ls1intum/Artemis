<div>
    <jhi-button
        id="reload"
        [btnType]="isDirty ? WARNING : PRIMARY"
        [isLoading]="isLoading"
        [icon]="faRotate"
        [title]="'artemisApp.iris.settings.button.reload'"
        (onClick)="loadIrisSettings()"
    />
    <jhi-button id="save" [btnType]="SUCCESS" [isLoading]="isSaving" [icon]="faSave" [title]="'artemisApp.iris.settings.button.save'" (onClick)="saveIrisSettings()" />
</div>
@if (irisSettings) {
    <div>
        <h3 jhiTranslate="artemisApp.iris.settings.subSettings.chatSettings"></h3>
        <div>
            <jhi-iris-common-sub-settings-update
                [subSettings]="irisSettings?.irisChatSettings"
                [parentSubSettings]="parentIrisSettings?.irisChatSettings"
                [settingsType]="settingsType"
                [courseId]="courseId"
                (onChanges)="isDirty = true"
            />
        </div>

        <hr class="hr" />

        <h3 jhiTranslate="artemisApp.iris.settings.subSettings.textExerciseChatSettings"></h3>
        <div>
            <jhi-iris-common-sub-settings-update
                [subSettings]="irisSettings?.irisTextExerciseChatSettings"
                [parentSubSettings]="parentIrisSettings?.irisTextExerciseChatSettings"
                [settingsType]="settingsType"
                [courseId]="courseId"
                (onChanges)="isDirty = true"
            />
        </div>

        @if (settingsType !== EXERCISE) {
            <hr class="hr" />

            <h3 jhiTranslate="artemisApp.iris.settings.subSettings.courseChatSettings"></h3>
            <div>
                <jhi-iris-common-sub-settings-update
                    [subSettings]="irisSettings?.irisCourseChatSettings"
                    [parentSubSettings]="parentIrisSettings?.irisCourseChatSettings"
                    [settingsType]="settingsType"
                    [courseId]="courseId"
                    (onChanges)="isDirty = true"
                />
            </div>

            <hr class="hr" />

            <div>
                <hr class="hr" />
                <h3 jhiTranslate="artemisApp.iris.settings.subSettings.lectureChatSettings"></h3>
                <div>
                    <jhi-iris-common-sub-settings-update
                        [subSettings]="irisSettings?.irisLectureChatSettings"
                        [parentSubSettings]="parentIrisSettings?.irisLectureChatSettings"
                        [settingsType]="settingsType"
                        [courseId]="courseId"
                        (onChanges)="isDirty = true"
                    />
                </div>

                <hr class="hr" />
                <h3 jhiTranslate="artemisApp.iris.settings.subSettings.lectureIngestionSettings.title"></h3>
                <jhi-iris-common-sub-settings-update
                    [subSettings]="irisSettings?.irisLectureIngestionSettings!"
                    [parentSubSettings]="parentIrisSettings?.irisLectureIngestionSettings"
                    [settingsType]="settingsType"
                    [courseId]="courseId"
                    (onChanges)="isDirty = true"
                />
                <br />

                @if (settingsType === COURSE) {
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="autoLectureIngestion" [disabled]="!isAdmin" [(ngModel)]="autoLectureIngestion" />
                        <label
                            class="form-check-label"
                            for="autoLectureIngestion"
                            jhiTranslate="artemisApp.iris.settings.subSettings.lectureIngestionSettings.autoIngestOnAttachmentUpload"
                        ></label>
                    </div>
                }
            </div>

            <hr class="hr" />
            <div>
                <h3 jhiTranslate="artemisApp.iris.settings.subSettings.faqIngestionSettings.title"></h3>
                <jhi-iris-common-sub-settings-update
                    [subSettings]="irisSettings?.irisFaqIngestionSettings!"
                    [parentSubSettings]="parentIrisSettings?.irisFaqIngestionSettings"
                    [settingsType]="settingsType"
                    [courseId]="courseId"
                    (onChanges)="isDirty = true"
                />
                <br />
                @if (settingsType === COURSE) {
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="autoFaqIngestion" [disabled]="!isAdmin" [(ngModel)]="autoFaqIngestion" />
                        <label class="form-check-label" for="autoLectureIngestion" jhiTranslate="artemisApp.iris.settings.subSettings.faqIngestionSettings.autoIngest"></label>
                    </div>
                }
            </div>
        }
        @if (settingsType !== EXERCISE) {
            <hr class="hr" />

            <div>
                <h3 jhiTranslate="artemisApp.iris.settings.subSettings.competencyGenerationSettings"></h3>
                <jhi-iris-common-sub-settings-update
                    [subSettings]="irisSettings?.irisCompetencyGenerationSettings!"
                    [parentSubSettings]="parentIrisSettings?.irisCompetencyGenerationSettings"
                    [settingsType]="settingsType"
                    [courseId]="courseId"
                    (onChanges)="isDirty = true"
                />
            </div>

            <hr class="hr" />

            <div>
                <h3 jhiTranslate="artemisApp.iris.settings.subSettings.tutorSuggestionSettings"></h3>
                <jhi-iris-common-sub-settings-update
                    [subSettings]="irisSettings?.irisTutorSuggestionSettings!"
                    [parentSubSettings]="parentIrisSettings?.irisTutorSuggestionSettings"
                    [settingsType]="settingsType"
                    [courseId]="courseId"
                    (onChanges)="isDirty = true"
                />
            </div>
        }
    </div>
}
